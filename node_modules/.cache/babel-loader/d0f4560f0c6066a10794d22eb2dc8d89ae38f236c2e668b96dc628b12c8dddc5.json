{"ast":null,"code":"import React,{useState,useEffect}from'react';import{staffApi}from'../../services/adminApi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddDesignation=()=>{const[designationName,setDesignationName]=useState('');const[designations,setDesignations]=useState([]);const[isValid,setIsValid]=useState(false);const[message,setMessage]=useState('');const[loading,setLoading]=useState(false);useEffect(()=>{const fetchDesignations=async()=>{const result=await staffApi.getDesignations();if(result.success){setDesignations(result.data);}};fetchDesignations();},[]);useEffect(()=>{const trimmedName=designationName.trim();const isUnique=!designations.some(d=>d.name.toLowerCase()===trimmedName.toLowerCase());setIsValid(trimmedName.length>0&&trimmedName.length<=50&&isUnique);},[designationName,designations]);const handleSubmit=async e=>{e.preventDefault();if(!isValid)return;setLoading(true);const result=await staffApi.addDesignation(designationName.trim());if(result.success){setDesignations(prev=>[...prev,result.data]);setMessage('Designation added successfully');setDesignationName('');}else{setMessage(result.error||'Failed to add designation');}setLoading(false);setTimeout(()=>setMessage(''),3000);};return/*#__PURE__*/_jsxs(\"div\",{className:\"menu-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Add Designation\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Create new staff designations.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Designation Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:designationName,onChange:e=>setDesignationName(e.target.value),maxLength:50,required:true}),designationName.trim()&&!isValid&&/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:designationName.trim().length===0?'Required':designationName.length>50?'Max 50 chars':'Already exists'})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!isValid||loading,children:loading?'Adding...':'Add Designation'})]}),message&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'10px',color:message.includes('success')?'green':'red'},children:message})]});};export default AddDesignation;","map":{"version":3,"names":["React","useState","useEffect","staffApi","jsx","_jsx","jsxs","_jsxs","AddDesignation","designationName","setDesignationName","designations","setDesignations","isValid","setIsValid","message","setMessage","loading","setLoading","fetchDesignations","result","getDesignations","success","data","trimmedName","trim","isUnique","some","d","name","toLowerCase","length","handleSubmit","e","preventDefault","addDesignation","prev","error","setTimeout","className","children","onSubmit","type","value","onChange","target","maxLength","required","style","color","disabled","marginTop","includes"],"sources":["C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/src/components/Admin Pannel/AddDesignation.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { staffApi } from '../../services/adminApi';\r\n\r\nconst AddDesignation = () => {\r\n  const [designationName, setDesignationName] = useState('');\r\n  const [designations, setDesignations] = useState([]);\r\n  const [isValid, setIsValid] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchDesignations = async () => {\r\n      const result = await staffApi.getDesignations();\r\n      if (result.success) {\r\n        setDesignations(result.data);\r\n      }\r\n    };\r\n    fetchDesignations();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const trimmedName = designationName.trim();\r\n    const isUnique = !designations.some(d => d.name.toLowerCase() === trimmedName.toLowerCase());\r\n    setIsValid(trimmedName.length > 0 && trimmedName.length <= 50 && isUnique);\r\n  }, [designationName, designations]);\r\n\r\n\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!isValid) return;\r\n\r\n    setLoading(true);\r\n    const result = await staffApi.addDesignation(designationName.trim());\r\n    if (result.success) {\r\n      setDesignations(prev => [...prev, result.data]);\r\n      setMessage('Designation added successfully');\r\n      setDesignationName('');\r\n    } else {\r\n      setMessage(result.error || 'Failed to add designation');\r\n    }\r\n    setLoading(false);\r\n    setTimeout(() => setMessage(''), 3000);\r\n  };\r\n\r\n  return (\r\n    <div className=\"menu-content\">\r\n      <h1>Add Designation</h1>\r\n      <p>Create new staff designations.</p>\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n          <label>Designation Name:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={designationName}\r\n            onChange={(e) => setDesignationName(e.target.value)}\r\n            maxLength={50}\r\n            required\r\n          />\r\n          {designationName.trim() && !isValid && (\r\n            <span style={{ color: 'red' }}>\r\n              {designationName.trim().length === 0 ? 'Required' :\r\n               designationName.length > 50 ? 'Max 50 chars' :\r\n               'Already exists'}\r\n            </span>\r\n          )}\r\n        </div>\r\n        <button type=\"submit\" disabled={!isValid || loading}>\r\n          {loading ? 'Adding...' : 'Add Designation'}\r\n        </button>\r\n      </form>\r\n      {message && <div style={{ marginTop: '10px', color: message.includes('success') ? 'green' : 'red' }}>{message}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddDesignation;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}