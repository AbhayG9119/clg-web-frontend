{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ViewAssignments=()=>{const[assignments,setAssignments]=useState([]);const[selectedAssignment,setSelectedAssignment]=useState(null);const[submissions,setSubmissions]=useState([]);const[loading,setLoading]=useState(false);useEffect(()=>{fetchAssignments();},[]);const fetchAssignments=async()=>{try{const token=localStorage.getItem('token');const config={headers:{Authorization:\"Bearer \".concat(token)}};const res=await axios.get('/api/staff/assignments',config);setAssignments(res.data);}catch(error){console.error('Error fetching assignments:',error);}};const fetchSubmissions=async assignmentId=>{setLoading(true);try{const token=localStorage.getItem('token');const config={headers:{Authorization:\"Bearer \".concat(token)}};const res=await axios.get(\"/api/staff/assignments/\".concat(assignmentId,\"/submissions\"),config);setSubmissions(res.data);setSelectedAssignment(assignmentId);}catch(error){console.error('Error fetching submissions:',error);}setLoading(false);};const updateGrade=async(submissionId,grade)=>{try{const token=localStorage.getItem('token');const config={headers:{Authorization:\"Bearer \".concat(token)}};await axios.put(\"/api/staff/submissions/\".concat(submissionId,\"/grade\"),{grade},config);fetchSubmissions(selectedAssignment);// Refresh\n}catch(error){console.error('Error updating grade:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"view-assignments\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"View Assignments\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"assignments-list\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Assignments\"}),assignments.map(assignment=>/*#__PURE__*/_jsxs(\"div\",{className:\"assignment-item\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[assignment.title,\" - \",assignment.class,\" (\",assignment.subject,\")\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Due: \",new Date(assignment.dueDate).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchSubmissions(assignment._id),children:\"View Submissions\"})]},assignment._id))]}),selectedAssignment&&/*#__PURE__*/_jsxs(\"div\",{className:\"submissions\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Submissions\"}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Student\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Submitted At\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Grade\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:submissions.map(sub=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:sub.studentName}),/*#__PURE__*/_jsx(\"td\",{children:sub.status}),/*#__PURE__*/_jsx(\"td\",{children:sub.submittedAt?new Date(sub.submittedAt).toLocaleDateString():'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:sub.grade,onChange:e=>updateGrade(sub._id,e.target.value),placeholder:\"Enter grade\"})})]},sub._id))})]})]})]});};export default ViewAssignments;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","ViewAssignments","assignments","setAssignments","selectedAssignment","setSelectedAssignment","submissions","setSubmissions","loading","setLoading","fetchAssignments","token","localStorage","getItem","config","headers","Authorization","concat","res","get","data","error","console","fetchSubmissions","assignmentId","updateGrade","submissionId","grade","put","className","children","map","assignment","title","class","subject","Date","dueDate","toLocaleDateString","onClick","_id","sub","studentName","status","submittedAt","type","value","onChange","e","target","placeholder"],"sources":["C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/src/components/Staff Pannel/ViewAssignments.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst ViewAssignments = () => {\r\n  const [assignments, setAssignments] = useState([]);\r\n  const [selectedAssignment, setSelectedAssignment] = useState(null);\r\n  const [submissions, setSubmissions] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchAssignments();\r\n  }, []);\r\n\r\n  const fetchAssignments = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const config = { headers: { Authorization: `Bearer ${token}` } };\r\n      const res = await axios.get('/api/staff/assignments', config);\r\n      setAssignments(res.data);\r\n    } catch (error) {\r\n      console.error('Error fetching assignments:', error);\r\n    }\r\n  };\r\n\r\n  const fetchSubmissions = async (assignmentId) => {\r\n    setLoading(true);\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const config = { headers: { Authorization: `Bearer ${token}` } };\r\n      const res = await axios.get(`/api/staff/assignments/${assignmentId}/submissions`, config);\r\n      setSubmissions(res.data);\r\n      setSelectedAssignment(assignmentId);\r\n    } catch (error) {\r\n      console.error('Error fetching submissions:', error);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const updateGrade = async (submissionId, grade) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const config = { headers: { Authorization: `Bearer ${token}` } };\r\n      await axios.put(`/api/staff/submissions/${submissionId}/grade`, { grade }, config);\r\n      fetchSubmissions(selectedAssignment); // Refresh\r\n    } catch (error) {\r\n      console.error('Error updating grade:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"view-assignments\">\r\n      <h1>View Assignments</h1>\r\n      <div className=\"assignments-list\">\r\n        <h2>Your Assignments</h2>\r\n        {assignments.map(assignment => (\r\n          <div key={assignment._id} className=\"assignment-item\">\r\n            <h3>{assignment.title} - {assignment.class} ({assignment.subject})</h3>\r\n            <p>Due: {new Date(assignment.dueDate).toLocaleDateString()}</p>\r\n            <button onClick={() => fetchSubmissions(assignment._id)}>View Submissions</button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {selectedAssignment && (\r\n        <div className=\"submissions\">\r\n          <h2>Submissions</h2>\r\n          {loading ? (\r\n            <div>Loading...</div>\r\n          ) : (\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  <th>Student</th>\r\n                  <th>Status</th>\r\n                  <th>Submitted At</th>\r\n                  <th>Grade</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {submissions.map(sub => (\r\n                  <tr key={sub._id}>\r\n                    <td>{sub.studentName}</td>\r\n                    <td>{sub.status}</td>\r\n                    <td>{sub.submittedAt ? new Date(sub.submittedAt).toLocaleDateString() : 'N/A'}</td>\r\n                    <td>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={sub.grade}\r\n                        onChange={(e) => updateGrade(sub._id, e.target.value)}\r\n                        placeholder=\"Enter grade\"\r\n                      />\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewAssignments;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}