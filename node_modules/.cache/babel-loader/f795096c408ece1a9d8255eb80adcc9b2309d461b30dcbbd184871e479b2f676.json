{"ast":null,"code":"import _objectSpread from\"C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import ReceiptViewer from'./ReceiptViewer';import Alert from'./Alert';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DuplicateReceipt=()=>{const[receiptId,setReceiptId]=useState('');const[receipt,setReceipt]=useState(null);const[showReceipt,setShowReceipt]=useState(false);const[alert,setAlert]=useState(null);const[isLoading,setIsLoading]=useState(false);// Mock data for UI demonstration\nconst mockReceipts=[{receiptNumber:'RCP1703123456789',date:'2023-12-20T10:30:00.000Z',studentId:'STU001',studentName:'John Doe',amount:2500,paymentMode:'Cash',remarks:'Partial payment for tuition fees',breakdown:[{head:'Tuition Fee',amount:2000},{head:'Sports Fee',amount:500}],printCount:2,pdfUrl:'#'},{receiptNumber:'RCP1704123456789',date:'2023-12-21T14:15:00.000Z',studentId:'STU002',studentName:'Jane Smith',amount:1500,paymentMode:'UPI',remarks:'Exam fee payment',breakdown:[{head:'Exam Fee',amount:1500}],printCount:1,pdfUrl:'#'}];const handleSearch=async e=>{e.preventDefault();if(!receiptId.trim()){setAlert({message:'Please enter a receipt number',type:'error'});return;}setIsLoading(true);// Mock search functionality\nconst foundReceipt=mockReceipts.find(r=>r.receiptNumber.includes(receiptId)||r.studentId===receiptId);setTimeout(()=>{setIsLoading(false);if(foundReceipt){setReceipt(foundReceipt);setShowReceipt(false);// Show preview first, not the receipt viewer\nsetAlert({message:'Receipt found!',type:'success'});}else{setAlert({message:'Receipt not found. Try RCP1703123456789 or STU001',type:'error'});}},1000);};const handleDuplicate=async()=>{setIsLoading(true);// Mock duplicate functionality\nsetTimeout(()=>{setIsLoading(false);const duplicateReceipt=_objectSpread(_objectSpread({},receipt),{},{receiptNumber:\"\".concat(receipt.receiptNumber,\"_DUP\"),printCount:(receipt.printCount||1)+1});setReceipt(duplicateReceipt);setShowReceipt(true);// Show the receipt viewer after generating duplicate\nsetAlert({message:'Duplicate receipt generated successfully!',type:'success'});},1000);};const userRole=localStorage.getItem('role');const canReprint=userRole==='admin';return/*#__PURE__*/_jsxs(\"div\",{className:\"menu-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Duplicate Receipt\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Generate duplicate copies of fee receipts.\"}),alert&&/*#__PURE__*/_jsx(Alert,{message:alert.message,type:alert.type,onClose:()=>setAlert(null)}),/*#__PURE__*/_jsxs(\"div\",{className:\"duplicate-receipt-container\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,className:\"search-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Receipt Number or Student ID:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:receiptId,onChange:e=>setReceiptId(e.target.value),placeholder:\"Enter receipt number or student ID (try RCP1703123456789 or STU001)\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:isLoading,children:isLoading?'Searching...':'Search Receipt'})]}),receipt&&!showReceipt&&/*#__PURE__*/_jsxs(\"div\",{className:\"receipt-preview\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Receipt Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"receipt-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Receipt No:\"}),\" \",receipt.receiptNumber]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Student:\"}),\" \",receipt.studentName,\" (\",receipt.studentId,\")\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Amount:\"}),\" \\u20B9\",receipt.amount.toLocaleString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",new Date(receipt.date).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Print Count:\"}),\" \",receipt.printCount||1]})]}),canReprint?/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:handleDuplicate,disabled:isLoading,children:isLoading?'Generating...':'Generate Duplicate'}):/*#__PURE__*/_jsx(\"p\",{className:\"access-denied\",children:\"Only admins can reprint receipts.\"})]})]}),showReceipt&&/*#__PURE__*/_jsx(ReceiptViewer,{receipt:receipt,onClose:()=>setShowReceipt(false),onPrint:()=>setAlert({message:'Duplicate receipt printed!',type:'success'}),isDuplicate:true})]});};export default DuplicateReceipt;","map":{"version":3,"names":["React","useState","ReceiptViewer","Alert","jsx","_jsx","jsxs","_jsxs","DuplicateReceipt","receiptId","setReceiptId","receipt","setReceipt","showReceipt","setShowReceipt","alert","setAlert","isLoading","setIsLoading","mockReceipts","receiptNumber","date","studentId","studentName","amount","paymentMode","remarks","breakdown","head","printCount","pdfUrl","handleSearch","e","preventDefault","trim","message","type","foundReceipt","find","r","includes","setTimeout","handleDuplicate","duplicateReceipt","_objectSpread","concat","userRole","localStorage","getItem","canReprint","className","children","onClose","onSubmit","value","onChange","target","placeholder","required","disabled","toLocaleString","Date","toLocaleDateString","onClick","onPrint","isDuplicate"],"sources":["C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/src/components/Admin Pannel/DuplicateReceipt.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport ReceiptViewer from './ReceiptViewer';\r\nimport Alert from './Alert';\r\n\r\nconst DuplicateReceipt = () => {\r\n  const [receiptId, setReceiptId] = useState('');\r\n  const [receipt, setReceipt] = useState(null);\r\n  const [showReceipt, setShowReceipt] = useState(false);\r\n  const [alert, setAlert] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // Mock data for UI demonstration\r\n  const mockReceipts = [\r\n    {\r\n      receiptNumber: 'RCP1703123456789',\r\n      date: '2023-12-20T10:30:00.000Z',\r\n      studentId: 'STU001',\r\n      studentName: 'John Doe',\r\n      amount: 2500,\r\n      paymentMode: 'Cash',\r\n      remarks: 'Partial payment for tuition fees',\r\n      breakdown: [\r\n        { head: 'Tuition Fee', amount: 2000 },\r\n        { head: 'Sports Fee', amount: 500 }\r\n      ],\r\n      printCount: 2,\r\n      pdfUrl: '#'\r\n    },\r\n    {\r\n      receiptNumber: 'RCP1704123456789',\r\n      date: '2023-12-21T14:15:00.000Z',\r\n      studentId: 'STU002',\r\n      studentName: 'Jane Smith',\r\n      amount: 1500,\r\n      paymentMode: 'UPI',\r\n      remarks: 'Exam fee payment',\r\n      breakdown: [\r\n        { head: 'Exam Fee', amount: 1500 }\r\n      ],\r\n      printCount: 1,\r\n      pdfUrl: '#'\r\n    }\r\n  ];\r\n\r\n  const handleSearch = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!receiptId.trim()) {\r\n      setAlert({ message: 'Please enter a receipt number', type: 'error' });\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n\r\n    // Mock search functionality\r\n    const foundReceipt = mockReceipts.find(r =>\r\n      r.receiptNumber.includes(receiptId) || r.studentId === receiptId\r\n    );\r\n\r\n    setTimeout(() => {\r\n      setIsLoading(false);\r\n\r\n      if (foundReceipt) {\r\n        setReceipt(foundReceipt);\r\n        setShowReceipt(false); // Show preview first, not the receipt viewer\r\n        setAlert({ message: 'Receipt found!', type: 'success' });\r\n      } else {\r\n        setAlert({ message: 'Receipt not found. Try RCP1703123456789 or STU001', type: 'error' });\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  const handleDuplicate = async () => {\r\n    setIsLoading(true);\r\n\r\n    // Mock duplicate functionality\r\n    setTimeout(() => {\r\n      setIsLoading(false);\r\n      const duplicateReceipt = {\r\n        ...receipt,\r\n        receiptNumber: `${receipt.receiptNumber}_DUP`,\r\n        printCount: (receipt.printCount || 1) + 1\r\n      };\r\n      setReceipt(duplicateReceipt);\r\n      setShowReceipt(true); // Show the receipt viewer after generating duplicate\r\n      setAlert({ message: 'Duplicate receipt generated successfully!', type: 'success' });\r\n    }, 1000);\r\n  };\r\n\r\n  const userRole = localStorage.getItem('role');\r\n  const canReprint = userRole === 'admin';\r\n\r\n  return (\r\n    <div className=\"menu-content\">\r\n      <h1>Duplicate Receipt</h1>\r\n      <p>Generate duplicate copies of fee receipts.</p>\r\n\r\n      {alert && (\r\n        <Alert\r\n          message={alert.message}\r\n          type={alert.type}\r\n          onClose={() => setAlert(null)}\r\n        />\r\n      )}\r\n\r\n      <div className=\"duplicate-receipt-container\">\r\n        <form onSubmit={handleSearch} className=\"search-form\">\r\n          <div className=\"form-group\">\r\n            <label>Receipt Number or Student ID:</label>\r\n            <input\r\n              type=\"text\"\r\n              value={receiptId}\r\n              onChange={(e) => setReceiptId(e.target.value)}\r\n              placeholder=\"Enter receipt number or student ID (try RCP1703123456789 or STU001)\"\r\n              required\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={isLoading}>\r\n            {isLoading ? 'Searching...' : 'Search Receipt'}\r\n          </button>\r\n        </form>\r\n\r\n        {receipt && !showReceipt && (\r\n          <div className=\"receipt-preview\">\r\n            <h3>Receipt Details</h3>\r\n            <div className=\"receipt-info\">\r\n              <p><strong>Receipt No:</strong> {receipt.receiptNumber}</p>\r\n              <p><strong>Student:</strong> {receipt.studentName} ({receipt.studentId})</p>\r\n              <p><strong>Amount:</strong> â‚¹{receipt.amount.toLocaleString()}</p>\r\n              <p><strong>Date:</strong> {new Date(receipt.date).toLocaleDateString()}</p>\r\n              <p><strong>Print Count:</strong> {receipt.printCount || 1}</p>\r\n            </div>\r\n\r\n            {canReprint ? (\r\n              <button\r\n                className=\"btn btn-secondary\"\r\n                onClick={handleDuplicate}\r\n                disabled={isLoading}\r\n              >\r\n                {isLoading ? 'Generating...' : 'Generate Duplicate'}\r\n              </button>\r\n            ) : (\r\n              <p className=\"access-denied\">Only admins can reprint receipts.</p>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {showReceipt && (\r\n        <ReceiptViewer\r\n          receipt={receipt}\r\n          onClose={() => setShowReceipt(false)}\r\n          onPrint={() => setAlert({ message: 'Duplicate receipt printed!', type: 'success' })}\r\n          isDuplicate={true}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DuplicateReceipt;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}