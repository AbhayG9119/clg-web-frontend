{"ast":null,"code":"import _objectSpread from\"C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"src\",\"srcSet\",\"sizes\",\"alt\",\"width\",\"height\",\"webpSrc\",\"webpSrcSet\"];import React,{useState,useRef,useEffect,memo}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LazyImage=/*#__PURE__*/memo(_ref=>{let{src,srcSet,sizes,alt,width,height,webpSrc,webpSrcSet}=_ref,props=_objectWithoutProperties(_ref,_excluded);const[isLoaded,setIsLoaded]=useState(false);const[isInView,setIsInView]=useState(false);const imgRef=useRef();useEffect(()=>{const observer=new IntersectionObserver(_ref2=>{let[entry]=_ref2;if(entry.isIntersecting){setIsInView(true);observer.disconnect();}},{threshold:0.1});if(imgRef.current){observer.observe(imgRef.current);}return()=>observer.disconnect();},[]);const handleLoad=()=>{setIsLoaded(true);};// Check if browser supports WebP\nconst supportsWebP=()=>{const canvas=document.createElement('canvas');canvas.width=1;canvas.height=1;return canvas.toDataURL('image/webp').indexOf('data:image/webp')===0;};const useWebP=supportsWebP();return/*#__PURE__*/_jsxs(\"picture\",{children:[isInView&&webpSrc&&/*#__PURE__*/_jsx(\"source\",{srcSet:webpSrcSet||webpSrc,type:\"image/webp\",sizes:sizes}),/*#__PURE__*/_jsx(\"img\",_objectSpread({ref:imgRef,src:isInView?src:undefined,srcSet:isInView?srcSet:undefined,sizes:sizes,alt:alt,width:width,height:height,onLoad:handleLoad,style:{opacity:isLoaded?1:0.5,transition:'opacity 0.3s',willChange:'opacity'},loading:\"lazy\"},props))]});});export default LazyImage;","map":{"version":3,"names":["React","useState","useRef","useEffect","memo","jsx","_jsx","jsxs","_jsxs","LazyImage","_ref","src","srcSet","sizes","alt","width","height","webpSrc","webpSrcSet","props","_objectWithoutProperties","_excluded","isLoaded","setIsLoaded","isInView","setIsInView","imgRef","observer","IntersectionObserver","_ref2","entry","isIntersecting","disconnect","threshold","current","observe","handleLoad","supportsWebP","canvas","document","createElement","toDataURL","indexOf","useWebP","children","type","_objectSpread","ref","undefined","onLoad","style","opacity","transition","willChange","loading"],"sources":["C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/src/pages/LazyImage.js"],"sourcesContent":["import React, { useState, useRef, useEffect, memo } from 'react';\r\n\r\nconst LazyImage = memo(({ src, srcSet, sizes, alt, width, height, webpSrc, webpSrcSet, ...props }) => {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [isInView, setIsInView] = useState(false);\r\n  const imgRef = useRef();\r\n\r\n  useEffect(() => {\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.isIntersecting) {\r\n          setIsInView(true);\r\n          observer.disconnect();\r\n        }\r\n      },\r\n      { threshold: 0.1 }\r\n    );\r\n\r\n    if (imgRef.current) {\r\n      observer.observe(imgRef.current);\r\n    }\r\n\r\n    return () => observer.disconnect();\r\n  }, []);\r\n\r\n  const handleLoad = () => {\r\n    setIsLoaded(true);\r\n  };\r\n\r\n  // Check if browser supports WebP\r\n  const supportsWebP = () => {\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = 1;\r\n    canvas.height = 1;\r\n    return canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0;\r\n  };\r\n\r\n  const useWebP = supportsWebP();\r\n\r\n  return (\r\n    <picture>\r\n      {isInView && webpSrc && (\r\n        <source srcSet={webpSrcSet || webpSrc} type=\"image/webp\" sizes={sizes} />\r\n      )}\r\n      <img\r\n        ref={imgRef}\r\n        src={isInView ? src : undefined}\r\n        srcSet={isInView ? srcSet : undefined}\r\n        sizes={sizes}\r\n        alt={alt}\r\n        width={width}\r\n        height={height}\r\n        onLoad={handleLoad}\r\n        style={{\r\n          opacity: isLoaded ? 1 : 0.5,\r\n          transition: 'opacity 0.3s',\r\n          willChange: 'opacity'\r\n        }}\r\n        loading=\"lazy\"\r\n        {...props}\r\n      />\r\n    </picture>\r\n  );\r\n});\r\n\r\nexport default LazyImage;\r\n"],"mappings":"8ZAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,CAAEC,SAAS,CAAEC,IAAI,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjE,KAAM,CAAAC,SAAS,cAAGL,IAAI,CAACM,IAAA,EAA+E,IAA9E,CAAEC,GAAG,CAAEC,MAAM,CAAEC,KAAK,CAAEC,GAAG,CAAEC,KAAK,CAAEC,MAAM,CAAEC,OAAO,CAAEC,UAAqB,CAAC,CAAAR,IAAA,CAAPS,KAAK,CAAAC,wBAAA,CAAAV,IAAA,CAAAW,SAAA,EAC7F,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGtB,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACuB,QAAQ,CAAEC,WAAW,CAAC,CAAGxB,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAAyB,MAAM,CAAGxB,MAAM,CAAC,CAAC,CAEvBC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAwB,QAAQ,CAAG,GAAI,CAAAC,oBAAoB,CACvCC,KAAA,EAAa,IAAZ,CAACC,KAAK,CAAC,CAAAD,KAAA,CACN,GAAIC,KAAK,CAACC,cAAc,CAAE,CACxBN,WAAW,CAAC,IAAI,CAAC,CACjBE,QAAQ,CAACK,UAAU,CAAC,CAAC,CACvB,CACF,CAAC,CACD,CAAEC,SAAS,CAAE,GAAI,CACnB,CAAC,CAED,GAAIP,MAAM,CAACQ,OAAO,CAAE,CAClBP,QAAQ,CAACQ,OAAO,CAACT,MAAM,CAACQ,OAAO,CAAC,CAClC,CAEA,MAAO,IAAMP,QAAQ,CAACK,UAAU,CAAC,CAAC,CACpC,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAI,UAAU,CAAGA,CAAA,GAAM,CACvBb,WAAW,CAAC,IAAI,CAAC,CACnB,CAAC,CAED;AACA,KAAM,CAAAc,YAAY,CAAGA,CAAA,GAAM,CACzB,KAAM,CAAAC,MAAM,CAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAC/CF,MAAM,CAACvB,KAAK,CAAG,CAAC,CAChBuB,MAAM,CAACtB,MAAM,CAAG,CAAC,CACjB,MAAO,CAAAsB,MAAM,CAACG,SAAS,CAAC,YAAY,CAAC,CAACC,OAAO,CAAC,iBAAiB,CAAC,GAAK,CAAC,CACxE,CAAC,CAED,KAAM,CAAAC,OAAO,CAAGN,YAAY,CAAC,CAAC,CAE9B,mBACE7B,KAAA,YAAAoC,QAAA,EACGpB,QAAQ,EAAIP,OAAO,eAClBX,IAAA,WAAQM,MAAM,CAAEM,UAAU,EAAID,OAAQ,CAAC4B,IAAI,CAAC,YAAY,CAAChC,KAAK,CAAEA,KAAM,CAAE,CACzE,cACDP,IAAA,OAAAwC,aAAA,EACEC,GAAG,CAAErB,MAAO,CACZf,GAAG,CAAEa,QAAQ,CAAGb,GAAG,CAAGqC,SAAU,CAChCpC,MAAM,CAAEY,QAAQ,CAAGZ,MAAM,CAAGoC,SAAU,CACtCnC,KAAK,CAAEA,KAAM,CACbC,GAAG,CAAEA,GAAI,CACTC,KAAK,CAAEA,KAAM,CACbC,MAAM,CAAEA,MAAO,CACfiC,MAAM,CAAEb,UAAW,CACnBc,KAAK,CAAE,CACLC,OAAO,CAAE7B,QAAQ,CAAG,CAAC,CAAG,GAAG,CAC3B8B,UAAU,CAAE,cAAc,CAC1BC,UAAU,CAAE,SACd,CAAE,CACFC,OAAO,CAAC,MAAM,EACVnC,KAAK,CACV,CAAC,EACK,CAAC,CAEd,CAAC,CAAC,CAEF,cAAe,CAAAV,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}