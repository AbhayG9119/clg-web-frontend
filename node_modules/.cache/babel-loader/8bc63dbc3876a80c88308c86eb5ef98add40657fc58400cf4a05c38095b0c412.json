{"ast":null,"code":"import _objectSpread from\"C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LeaveManagement=()=>{const[leaves,setLeaves]=useState([]);const[formData,setFormData]=useState({type:'sick',startDate:'',endDate:'',reason:''});const[loading,setLoading]=useState(false);const[message,setMessage]=useState('');useEffect(()=>{fetchLeaves();},[]);const fetchLeaves=async()=>{try{const token=localStorage.getItem('token');const config={headers:{Authorization:\"Bearer \".concat(token)}};const res=await axios.get('/api/staff/leaves',config);setLeaves(res.data);}catch(error){console.error('Error fetching leaves:',error);}};const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{const token=localStorage.getItem('token');const config={headers:{Authorization:\"Bearer \".concat(token)}};const start=new Date(formData.startDate);const end=new Date(formData.endDate);const days=Math.ceil((end-start)/(1000*60*60*24))+1;await axios.post('/api/staff/leave/apply',_objectSpread(_objectSpread({},formData),{},{days}),config);setMessage('Leave applied successfully');setFormData({type:'sick',startDate:'',endDate:'',reason:''});fetchLeaves();// Refresh list\n}catch(error){setMessage('Failed to apply leave');}setLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"leave-management\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Leave Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"apply-leave\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Apply for Leave\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Type:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"type\",value:formData.type,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"sick\",children:\"Sick\"}),/*#__PURE__*/_jsx(\"option\",{value:\"casual\",children:\"Casual\"}),/*#__PURE__*/_jsx(\"option\",{value:\"earned\",children:\"Earned\"}),/*#__PURE__*/_jsx(\"option\",{value:\"maternity\",children:\"Maternity\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Start Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"startDate\",value:formData.startDate,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"End Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"endDate\",value:formData.endDate,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Reason:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"reason\",value:formData.reason,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:\"Apply Leave\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"leave-history\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Leave History\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Start Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"End Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Days\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reason\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:leaves.map(leave=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:leave.type}),/*#__PURE__*/_jsx(\"td\",{children:new Date(leave.startDate).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:new Date(leave.endDate).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:leave.days}),/*#__PURE__*/_jsx(\"td\",{children:leave.status}),/*#__PURE__*/_jsx(\"td\",{children:leave.reason})]},leave._id))})]})]})]});};export default LeaveManagement;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","LeaveManagement","leaves","setLeaves","formData","setFormData","type","startDate","endDate","reason","loading","setLoading","message","setMessage","fetchLeaves","token","localStorage","getItem","config","headers","Authorization","concat","res","get","data","error","console","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","start","Date","end","days","Math","ceil","post","className","children","onSubmit","onChange","required","disabled","map","leave","toLocaleDateString","status","_id"],"sources":["C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/src/components/Staff Pannel/LeaveManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst LeaveManagement = () => {\r\n  const [leaves, setLeaves] = useState([]);\r\n  const [formData, setFormData] = useState({\r\n    type: 'sick',\r\n    startDate: '',\r\n    endDate: '',\r\n    reason: ''\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchLeaves();\r\n  }, []);\r\n\r\n  const fetchLeaves = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const config = { headers: { Authorization: `Bearer ${token}` } };\r\n      const res = await axios.get('/api/staff/leaves', config);\r\n      setLeaves(res.data);\r\n    } catch (error) {\r\n      console.error('Error fetching leaves:', error);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const config = { headers: { Authorization: `Bearer ${token}` } };\r\n      const start = new Date(formData.startDate);\r\n      const end = new Date(formData.endDate);\r\n      const days = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;\r\n      await axios.post('/api/staff/leave/apply', {\r\n        ...formData,\r\n        days\r\n      }, config);\r\n      setMessage('Leave applied successfully');\r\n      setFormData({ type: 'sick', startDate: '', endDate: '', reason: '' });\r\n      fetchLeaves(); // Refresh list\r\n    } catch (error) {\r\n      setMessage('Failed to apply leave');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"leave-management\">\r\n      <h1>Leave Management</h1>\r\n      <div className=\"apply-leave\">\r\n        <h2>Apply for Leave</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label>Type:</label>\r\n            <select name=\"type\" value={formData.type} onChange={handleChange} required>\r\n              <option value=\"sick\">Sick</option>\r\n              <option value=\"casual\">Casual</option>\r\n              <option value=\"earned\">Earned</option>\r\n              <option value=\"maternity\">Maternity</option>\r\n              <option value=\"other\">Other</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Start Date:</label>\r\n            <input type=\"date\" name=\"startDate\" value={formData.startDate} onChange={handleChange} required />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>End Date:</label>\r\n            <input type=\"date\" name=\"endDate\" value={formData.endDate} onChange={handleChange} required />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Reason:</label>\r\n            <textarea name=\"reason\" value={formData.reason} onChange={handleChange} required />\r\n          </div>\r\n          <button type=\"submit\" disabled={loading}>Apply Leave</button>\r\n        </form>\r\n        {message && <div className=\"message\">{message}</div>}\r\n      </div>\r\n      <div className=\"leave-history\">\r\n        <h2>Leave History</h2>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Type</th>\r\n              <th>Start Date</th>\r\n              <th>End Date</th>\r\n              <th>Days</th>\r\n              <th>Status</th>\r\n              <th>Reason</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {leaves.map(leave => (\r\n              <tr key={leave._id}>\r\n                <td>{leave.type}</td>\r\n                <td>{new Date(leave.startDate).toLocaleDateString()}</td>\r\n                <td>{new Date(leave.endDate).toLocaleDateString()}</td>\r\n                <td>{leave.days}</td>\r\n                <td>{leave.status}</td>\r\n                <td>{leave.reason}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LeaveManagement;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}