{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Circulars=()=>{const[circulars,setCirculars]=useState([]);const[loading,setLoading]=useState(false);useEffect(()=>{fetchCirculars();},[]);const fetchCirculars=async()=>{try{const token=localStorage.getItem('token');const config={headers:{Authorization:\"Bearer \".concat(token)}};const res=await axios.get('/api/staff/circulars',config);setCirculars(res.data);}catch(error){console.error('Error fetching circulars:',error);}};const downloadCircular=(url,title)=>{const a=document.createElement('a');a.href=url;a.download=title;a.click();};return/*#__PURE__*/_jsxs(\"div\",{className:\"circulars\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Circulars / Notices\"}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(\"ul\",{children:circulars.map(circular=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:circular.title}),/*#__PURE__*/_jsx(\"p\",{children:circular.description}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"small\",{children:new Date(circular.date).toLocaleDateString()})}),circular.fileUrl&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadCircular(circular.fileUrl,circular.title),children:\"Download\"})]},circular._id))})]});};export default Circulars;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Circulars","circulars","setCirculars","loading","setLoading","fetchCirculars","token","localStorage","getItem","config","headers","Authorization","concat","res","get","data","error","console","downloadCircular","url","title","a","document","createElement","href","download","click","className","children","map","circular","description","Date","date","toLocaleDateString","fileUrl","onClick","_id"],"sources":["C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/src/components/Staff Pannel/Circulars.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Circulars = () => {\r\n  const [circulars, setCirculars] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchCirculars();\r\n  }, []);\r\n\r\n  const fetchCirculars = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const config = { headers: { Authorization: `Bearer ${token}` } };\r\n      const res = await axios.get('/api/staff/circulars', config);\r\n      setCirculars(res.data);\r\n    } catch (error) {\r\n      console.error('Error fetching circulars:', error);\r\n    }\r\n  };\r\n\r\n  const downloadCircular = (url, title) => {\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = title;\r\n    a.click();\r\n  };\r\n\r\n  return (\r\n    <div className=\"circulars\">\r\n      <h1>Circulars / Notices</h1>\r\n      {loading ? (\r\n        <div>Loading...</div>\r\n      ) : (\r\n        <ul>\r\n          {circulars.map(circular => (\r\n            <li key={circular._id}>\r\n              <h3>{circular.title}</h3>\r\n              <p>{circular.description}</p>\r\n              <p><small>{new Date(circular.date).toLocaleDateString()}</small></p>\r\n              {circular.fileUrl && (\r\n                <button onClick={() => downloadCircular(circular.fileUrl, circular.title)}>Download</button>\r\n              )}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Circulars;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACtB,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,KAAK,CAAC,CAE7CC,SAAS,CAAC,IAAM,CACdW,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,MAAM,CAAG,CAAEC,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYN,KAAK,CAAG,CAAE,CAAC,CAChE,KAAM,CAAAO,GAAG,CAAG,KAAM,CAAAlB,KAAK,CAACmB,GAAG,CAAC,sBAAsB,CAAEL,MAAM,CAAC,CAC3DP,YAAY,CAACW,GAAG,CAACE,IAAI,CAAC,CACxB,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACnD,CACF,CAAC,CAED,KAAM,CAAAE,gBAAgB,CAAGA,CAACC,GAAG,CAAEC,KAAK,GAAK,CACvC,KAAM,CAAAC,CAAC,CAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC,CACrCF,CAAC,CAACG,IAAI,CAAGL,GAAG,CACZE,CAAC,CAACI,QAAQ,CAAGL,KAAK,CAClBC,CAAC,CAACK,KAAK,CAAC,CAAC,CACX,CAAC,CAED,mBACE3B,KAAA,QAAK4B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB/B,IAAA,OAAA+B,QAAA,CAAI,qBAAmB,CAAI,CAAC,CAC3BzB,OAAO,cACNN,IAAA,QAAA+B,QAAA,CAAK,YAAU,CAAK,CAAC,cAErB/B,IAAA,OAAA+B,QAAA,CACG3B,SAAS,CAAC4B,GAAG,CAACC,QAAQ,eACrB/B,KAAA,OAAA6B,QAAA,eACE/B,IAAA,OAAA+B,QAAA,CAAKE,QAAQ,CAACV,KAAK,CAAK,CAAC,cACzBvB,IAAA,MAAA+B,QAAA,CAAIE,QAAQ,CAACC,WAAW,CAAI,CAAC,cAC7BlC,IAAA,MAAA+B,QAAA,cAAG/B,IAAA,UAAA+B,QAAA,CAAQ,GAAI,CAAAI,IAAI,CAACF,QAAQ,CAACG,IAAI,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAAQ,CAAC,CAAG,CAAC,CACnEJ,QAAQ,CAACK,OAAO,eACftC,IAAA,WAAQuC,OAAO,CAAEA,CAAA,GAAMlB,gBAAgB,CAACY,QAAQ,CAACK,OAAO,CAAEL,QAAQ,CAACV,KAAK,CAAE,CAAAQ,QAAA,CAAC,UAAQ,CAAQ,CAC5F,GANME,QAAQ,CAACO,GAOd,CACL,CAAC,CACA,CACL,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAArC,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}