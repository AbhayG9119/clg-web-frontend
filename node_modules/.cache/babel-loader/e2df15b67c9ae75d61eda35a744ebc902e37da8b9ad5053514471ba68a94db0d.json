{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Navigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,requiredRole}=_ref;const[isAuthenticated,setIsAuthenticated]=useState(false);const[userRole,setUserRole]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const checkAuth=()=>{const token=localStorage.getItem('token');const role=localStorage.getItem('role');if(token&&role){setIsAuthenticated(true);setUserRole(role);}else{setIsAuthenticated(false);setUserRole(null);}setLoading(false);};checkAuth();},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(!isAuthenticated){// Redirect to appropriate login page based on required role\nif(requiredRole==='admin'){return/*#__PURE__*/_jsx(Navigate,{to:\"/admin/login\",replace:true});}else if(requiredRole==='staff'){return/*#__PURE__*/_jsx(Navigate,{to:\"/staff/login\",replace:true});}else{return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}}if(requiredRole&&userRole!==requiredRole){// Redirect to appropriate login page based on required role\nif(requiredRole==='admin'){return/*#__PURE__*/_jsx(Navigate,{to:\"/admin/login\",replace:true});}else if(requiredRole==='staff'){return/*#__PURE__*/_jsx(Navigate,{to:\"/staff/login\",replace:true});}else{return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}}return children;};export default ProtectedRoute;","map":{"version":3,"names":["React","useEffect","useState","Navigate","jsx","_jsx","ProtectedRoute","_ref","children","requiredRole","isAuthenticated","setIsAuthenticated","userRole","setUserRole","loading","setLoading","checkAuth","token","localStorage","getItem","role","to","replace"],"sources":["C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/src/components/ProtectedRoute.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ children, requiredRole }) => {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [userRole, setUserRole] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const checkAuth = () => {\r\n      const token = localStorage.getItem('token');\r\n      const role = localStorage.getItem('role');\r\n\r\n      if (token && role) {\r\n        setIsAuthenticated(true);\r\n        setUserRole(role);\r\n      } else {\r\n        setIsAuthenticated(false);\r\n        setUserRole(null);\r\n      }\r\n      setLoading(false);\r\n    };\r\n\r\n    checkAuth();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  if (!isAuthenticated) {\r\n    // Redirect to appropriate login page based on required role\r\n    if (requiredRole === 'admin') {\r\n      return <Navigate to=\"/admin/login\" replace />;\r\n    } else if (requiredRole === 'staff') {\r\n      return <Navigate to=\"/staff/login\" replace />;\r\n    } else {\r\n      return <Navigate to=\"/login\" replace />;\r\n    }\r\n  }\r\n\r\n  if (requiredRole && userRole !== requiredRole) {\r\n    // Redirect to appropriate login page based on required role\r\n    if (requiredRole === 'admin') {\r\n      return <Navigate to=\"/admin/login\" replace />;\r\n    } else if (requiredRole === 'staff') {\r\n      return <Navigate to=\"/staff/login\" replace />;\r\n    } else {\r\n      return <Navigate to=\"/login\" replace />;\r\n    }\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,QAAQ,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAgC,IAA/B,CAAEC,QAAQ,CAAEC,YAAa,CAAC,CAAAF,IAAA,CAChD,KAAM,CAACG,eAAe,CAAEC,kBAAkB,CAAC,CAAGT,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACU,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACY,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAe,SAAS,CAAGA,CAAA,GAAM,CACtB,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,IAAI,CAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAEzC,GAAIF,KAAK,EAAIG,IAAI,CAAE,CACjBT,kBAAkB,CAAC,IAAI,CAAC,CACxBE,WAAW,CAACO,IAAI,CAAC,CACnB,CAAC,IAAM,CACLT,kBAAkB,CAAC,KAAK,CAAC,CACzBE,WAAW,CAAC,IAAI,CAAC,CACnB,CACAE,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAEDC,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIF,OAAO,CAAE,CACX,mBAAOT,IAAA,QAAAG,QAAA,CAAK,YAAU,CAAK,CAAC,CAC9B,CAEA,GAAI,CAACE,eAAe,CAAE,CACpB;AACA,GAAID,YAAY,GAAK,OAAO,CAAE,CAC5B,mBAAOJ,IAAA,CAACF,QAAQ,EAACkB,EAAE,CAAC,cAAc,CAACC,OAAO,MAAE,CAAC,CAC/C,CAAC,IAAM,IAAIb,YAAY,GAAK,OAAO,CAAE,CACnC,mBAAOJ,IAAA,CAACF,QAAQ,EAACkB,EAAE,CAAC,cAAc,CAACC,OAAO,MAAE,CAAC,CAC/C,CAAC,IAAM,CACL,mBAAOjB,IAAA,CAACF,QAAQ,EAACkB,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CACF,CAEA,GAAIb,YAAY,EAAIG,QAAQ,GAAKH,YAAY,CAAE,CAC7C;AACA,GAAIA,YAAY,GAAK,OAAO,CAAE,CAC5B,mBAAOJ,IAAA,CAACF,QAAQ,EAACkB,EAAE,CAAC,cAAc,CAACC,OAAO,MAAE,CAAC,CAC/C,CAAC,IAAM,IAAIb,YAAY,GAAK,OAAO,CAAE,CACnC,mBAAOJ,IAAA,CAACF,QAAQ,EAACkB,EAAE,CAAC,cAAc,CAACC,OAAO,MAAE,CAAC,CAC/C,CAAC,IAAM,CACL,mBAAOjB,IAAA,CAACF,QAAQ,EAACkB,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CACF,CAEA,MAAO,CAAAd,QAAQ,CACjB,CAAC,CAED,cAAe,CAAAF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}