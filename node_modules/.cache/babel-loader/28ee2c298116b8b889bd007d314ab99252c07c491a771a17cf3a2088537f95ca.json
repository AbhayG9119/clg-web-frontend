{"ast":null,"code":"import _objectSpread from\"C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useMemo}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FeesLedgerSection=_ref=>{let{feeLedger=[],filters:propFilters,setFilters:propSetFilters}=_ref;const[localFilters,setLocalFilters]=useState({feeType:'',dateRange:{start:'',end:''}});const[classFilter,setClassFilter]=useState('');// Optional for multi-class\nconst filters=propFilters||localFilters;const setFilters=propSetFilters||setLocalFilters;// Filtered and sorted ledger (recent first)\nconst filteredLedger=useMemo(()=>{if(!feeLedger||!Array.isArray(feeLedger)||!filters)return[];let filtered=feeLedger.filter(fee=>{const matchesFeeType=!filters.feeType||fee.fee_type===filters.feeType;const matchesDate=(!filters.dateRange.start||new Date(fee.date)>=new Date(filters.dateRange.start))&&(!filters.dateRange.end||new Date(fee.date)<=new Date(filters.dateRange.end));return matchesFeeType&&matchesDate;});return filtered.sort((a,b)=>new Date(b.date)-new Date(a.date));},[feeLedger,filters]);const handleFilterChange=e=>{const{name,value}=e.target;if(typeof setFilters==='function'){if(name==='feeType'){setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{feeType:value}));}else if(name==='startDate'){setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{dateRange:_objectSpread(_objectSpread({},prev.dateRange),{},{start:value})}));}else if(name==='endDate'){setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{dateRange:_objectSpread(_objectSpread({},prev.dateRange),{},{end:value})}));}}};const getStatusBadge=status=>{const classes={Paid:'badge paid',Pending:'badge pending',Overdue:'badge overdue'};return/*#__PURE__*/_jsx(\"span\",{className:classes[status]||'badge',children:status});};return/*#__PURE__*/_jsxs(\"div\",{className:\"fees-ledger-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"View Fees Ledger\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-bar\",children:[/*#__PURE__*/_jsxs(\"select\",{name:\"feeType\",value:filters.feeType,onChange:handleFilterChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Fee Types\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Tuition\",children:\"Tuition\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Hostel\",children:\"Hostel\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Exam\",children:\"Exam\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"startDate\",placeholder:\"Start Date\",value:filters.dateRange.start,onChange:handleFilterChange}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"endDate\",placeholder:\"End Date\",value:filters.dateRange.end,onChange:handleFilterChange}),/*#__PURE__*/_jsxs(\"select\",{value:classFilter,onChange:e=>setClassFilter(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Classes\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Class A\",children:\"Class A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Class B\",children:\"Class B\"})]})]}),filteredLedger.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"fees-table\",role:\"table\",\"aria-label\":\"Fees Ledger\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Transaction Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fee Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment Mode\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredLedger.map(fee=>/*#__PURE__*/_jsxs(\"tr\",{title:\"Receipt ID: \".concat(fee.transaction_id),children:[/*#__PURE__*/_jsx(\"td\",{children:fee.date}),/*#__PURE__*/_jsx(\"td\",{children:fee.fee_type}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9\",fee.amount]}),/*#__PURE__*/_jsx(\"td\",{children:fee.payment_mode}),/*#__PURE__*/_jsx(\"td\",{children:getStatusBadge(fee.status)})]},fee.transaction_id))})]}):/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No fee records found\"})})]});};export default FeesLedgerSection;","map":{"version":3,"names":["React","useState","useMemo","jsx","_jsx","jsxs","_jsxs","FeesLedgerSection","_ref","feeLedger","filters","propFilters","setFilters","propSetFilters","localFilters","setLocalFilters","feeType","dateRange","start","end","classFilter","setClassFilter","filteredLedger","Array","isArray","filtered","filter","fee","matchesFeeType","fee_type","matchesDate","Date","date","sort","a","b","handleFilterChange","e","name","value","target","prev","_objectSpread","getStatusBadge","status","classes","Paid","Pending","Overdue","className","children","onChange","type","placeholder","length","role","map","title","concat","transaction_id","amount","payment_mode"],"sources":["C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/src/components/Student Pannel/ViewFeeLedger.js"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\n\r\nconst FeesLedgerSection = ({ feeLedger = [], filters: propFilters, setFilters: propSetFilters }) => {\r\n  const [localFilters, setLocalFilters] = useState({ feeType: '', dateRange: { start: '', end: '' } });\r\n  const [classFilter, setClassFilter] = useState(''); // Optional for multi-class\r\n\r\n  const filters = propFilters || localFilters;\r\n  const setFilters = propSetFilters || setLocalFilters;\r\n\r\n  // Filtered and sorted ledger (recent first)\r\n  const filteredLedger = useMemo(() => {\r\n    if (!feeLedger || !Array.isArray(feeLedger) || !filters) return [];\r\n    let filtered = feeLedger.filter(fee => {\r\n      const matchesFeeType = !filters.feeType || fee.fee_type === filters.feeType;\r\n      const matchesDate = (!filters.dateRange.start || new Date(fee.date) >= new Date(filters.dateRange.start)) &&\r\n                          (!filters.dateRange.end || new Date(fee.date) <= new Date(filters.dateRange.end));\r\n      return matchesFeeType && matchesDate;\r\n    });\r\n    return filtered.sort((a, b) => new Date(b.date) - new Date(a.date));\r\n  }, [feeLedger, filters]);\r\n\r\n  const handleFilterChange = (e) => {\r\n    const { name, value } = e.target;\r\n    if (typeof setFilters === 'function') {\r\n      if (name === 'feeType') {\r\n        setFilters(prev => ({ ...prev, feeType: value }));\r\n      } else if (name === 'startDate') {\r\n        setFilters(prev => ({ ...prev, dateRange: { ...prev.dateRange, start: value } }));\r\n      } else if (name === 'endDate') {\r\n        setFilters(prev => ({ ...prev, dateRange: { ...prev.dateRange, end: value } }));\r\n      }\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status) => {\r\n    const classes = {\r\n      Paid: 'badge paid',\r\n      Pending: 'badge pending',\r\n      Overdue: 'badge overdue'\r\n    };\r\n    return <span className={classes[status] || 'badge'}>{status}</span>;\r\n  };\r\n\r\n  return (\r\n    <div className=\"fees-ledger-section\">\r\n      <h2>View Fees Ledger</h2>\r\n\r\n      {/* Filters */}\r\n      <div className=\"filter-bar\">\r\n        <select name=\"feeType\" value={filters.feeType} onChange={handleFilterChange}>\r\n          <option value=\"\">All Fee Types</option>\r\n          <option value=\"Tuition\">Tuition</option>\r\n          <option value=\"Hostel\">Hostel</option>\r\n          <option value=\"Exam\">Exam</option>\r\n        </select>\r\n        <input\r\n          type=\"date\"\r\n          name=\"startDate\"\r\n          placeholder=\"Start Date\"\r\n          value={filters.dateRange.start}\r\n          onChange={handleFilterChange}\r\n        />\r\n        <input\r\n          type=\"date\"\r\n          name=\"endDate\"\r\n          placeholder=\"End Date\"\r\n          value={filters.dateRange.end}\r\n          onChange={handleFilterChange}\r\n        />\r\n        {/* Optional Class Dropdown */}\r\n        <select value={classFilter} onChange={(e) => setClassFilter(e.target.value)}>\r\n          <option value=\"\">All Classes</option>\r\n          <option value=\"Class A\">Class A</option>\r\n          <option value=\"Class B\">Class B</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Ledger Table */}\r\n      {filteredLedger.length > 0 ? (\r\n        <table className=\"fees-table\" role=\"table\" aria-label=\"Fees Ledger\">\r\n          <thead>\r\n            <tr>\r\n              <th>Transaction Date</th>\r\n              <th>Fee Type</th>\r\n              <th>Amount</th>\r\n              <th>Payment Mode</th>\r\n              <th>Status</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredLedger.map(fee => (\r\n              <tr key={fee.transaction_id} title={`Receipt ID: ${fee.transaction_id}`}>\r\n                <td>{fee.date}</td>\r\n                <td>{fee.fee_type}</td>\r\n                <td>â‚¹{fee.amount}</td>\r\n                <td>{fee.payment_mode}</td>\r\n                <td>{getStatusBadge(fee.status)}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      ) : (\r\n        <div className=\"empty-state\">\r\n          <p>No fee records found</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FeesLedgerSection;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}