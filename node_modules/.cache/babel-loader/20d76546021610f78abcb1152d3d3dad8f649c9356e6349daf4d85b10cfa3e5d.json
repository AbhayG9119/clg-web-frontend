{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReportCard=()=>{const[students,setStudents]=useState([]);const[selectedStudent,setSelectedStudent]=useState('');const[reportCard,setReportCard]=useState(null);const[loading,setLoading]=useState(false);useEffect(()=>{fetchStudents();},[]);const fetchStudents=async()=>{try{const token=localStorage.getItem('token');const config={headers:{Authorization:\"Bearer \".concat(token)}};const res=await axios.get('/api/staff/students',config);// Assume endpoint for assigned students\nsetStudents(res.data);}catch(error){console.error('Error fetching students:',error);}};const generateReportCard=async()=>{if(!selectedStudent)return;setLoading(true);try{const token=localStorage.getItem('token');const config={headers:{Authorization:\"Bearer \".concat(token)}};const res=await axios.get(\"/api/staff/report-card/\".concat(selectedStudent),config);setReportCard(res.data);}catch(error){console.error('Error generating report card:',error);}setLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"report-card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Report Card\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"select-student\",children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedStudent,onChange:e=>setSelectedStudent(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Student\"}),students.map(student=>/*#__PURE__*/_jsxs(\"option\",{value:student._id,children:[student.name,\" - \",student.class]},student._id))]}),/*#__PURE__*/_jsx(\"button\",{onClick:generateReportCard,disabled:loading||!selectedStudent,children:\"Generate Report\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):reportCard?/*#__PURE__*/_jsxs(\"div\",{className:\"report-details\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Report for \",reportCard.studentName]}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Subject\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Grade\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Attendance %\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:reportCard.subjects.map(subject=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:subject.subject}),/*#__PURE__*/_jsx(\"td\",{children:subject.grade}),/*#__PURE__*/_jsx(\"td\",{children:subject.attendancePercentage})]},subject.subject))})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Overall Grade:\"}),\" \",reportCard.overallGrade]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Overall Attendance:\"}),\" \",reportCard.overallAttendance,\"%\"]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Select a student to generate report card.\"})]});};export default ReportCard;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","ReportCard","students","setStudents","selectedStudent","setSelectedStudent","reportCard","setReportCard","loading","setLoading","fetchStudents","token","localStorage","getItem","config","headers","Authorization","concat","res","get","data","error","console","generateReportCard","className","children","value","onChange","e","target","map","student","_id","name","class","onClick","disabled","studentName","subjects","subject","grade","attendancePercentage","overallGrade","overallAttendance"],"sources":["C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/src/components/Staff Pannel/ReportCard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst ReportCard = () => {\r\n  const [students, setStudents] = useState([]);\r\n  const [selectedStudent, setSelectedStudent] = useState('');\r\n  const [reportCard, setReportCard] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchStudents();\r\n  }, []);\r\n\r\n  const fetchStudents = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const config = { headers: { Authorization: `Bearer ${token}` } };\r\n      const res = await axios.get('/api/staff/students', config); // Assume endpoint for assigned students\r\n      setStudents(res.data);\r\n    } catch (error) {\r\n      console.error('Error fetching students:', error);\r\n    }\r\n  };\r\n\r\n  const generateReportCard = async () => {\r\n    if (!selectedStudent) return;\r\n    setLoading(true);\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const config = { headers: { Authorization: `Bearer ${token}` } };\r\n      const res = await axios.get(`/api/staff/report-card/${selectedStudent}`, config);\r\n      setReportCard(res.data);\r\n    } catch (error) {\r\n      console.error('Error generating report card:', error);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"report-card\">\r\n      <h1>Report Card</h1>\r\n      <div className=\"select-student\">\r\n        <select value={selectedStudent} onChange={(e) => setSelectedStudent(e.target.value)}>\r\n          <option value=\"\">Select Student</option>\r\n          {students.map(student => (\r\n            <option key={student._id} value={student._id}>{student.name} - {student.class}</option>\r\n          ))}\r\n        </select>\r\n        <button onClick={generateReportCard} disabled={loading || !selectedStudent}>Generate Report</button>\r\n      </div>\r\n      {loading ? (\r\n        <div>Loading...</div>\r\n      ) : reportCard ? (\r\n        <div className=\"report-details\">\r\n          <h2>Report for {reportCard.studentName}</h2>\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Subject</th>\r\n                <th>Grade</th>\r\n                <th>Attendance %</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {reportCard.subjects.map(subject => (\r\n                <tr key={subject.subject}>\r\n                  <td>{subject.subject}</td>\r\n                  <td>{subject.grade}</td>\r\n                  <td>{subject.attendancePercentage}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          <p><strong>Overall Grade:</strong> {reportCard.overallGrade}</p>\r\n          <p><strong>Overall Attendance:</strong> {reportCard.overallAttendance}%</p>\r\n        </div>\r\n      ) : (\r\n        <p>Select a student to generate report card.</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportCard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}