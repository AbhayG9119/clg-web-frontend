{"ast":null,"code":"import _objectSpread from\"C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{staffAttendanceApi}from'../../services/adminApi';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const StaffAttendance=()=>{const[date,setDate]=useState(new Date().toISOString().split('T')[0]);const[staffList,setStaffList]=useState([]);const[attendance,setAttendance]=useState({});const[originalAttendance,setOriginalAttendance]=useState({});const[viewDate,setViewDate]=useState(new Date().toISOString().split('T')[0]);const[viewAttendanceData,setViewAttendanceData]=useState({});const[leaveRequests,setLeaveRequests]=useState([]);const[message,setMessage]=useState('');const[loading,setLoading]=useState(false);const[leaveLoading,setLeaveLoading]=useState({});const[showSavedRecords,setShowSavedRecords]=useState(false);const[showMonthlyView,setShowMonthlyView]=useState(false);const[monthlyData,setMonthlyData]=useState([]);const[month,setMonth]=useState(new Date().getMonth()+1);const[year,setYear]=useState(new Date().getFullYear());const[selectedStaffReport,setSelectedStaffReport]=useState(null);const[attendanceLoading,setAttendanceLoading]=useState(false);const[viewAttendanceLoading,setViewAttendanceLoading]=useState(false);const[monthlyAttendanceLoading,setMonthlyAttendanceLoading]=useState(false);const[monthlyError,setMonthlyError]=useState('');useEffect(()=>{const fetchData=async()=>{// Fetch staff list from backend\nconst staffResult=await staffAttendanceApi.getStaffList();if(staffResult.success){const formattedStaff=staffResult.data.map(staff=>({id:staff._id,full_name:staff.name,designation_name:staff.designation,department:staff.department,staffId:staff.staffId}));setStaffList(formattedStaff);}// Fetch leave requests from backend\nconst leaveResult=await staffAttendanceApi.getLeaveRequests();if(leaveResult.success){setLeaveRequests(leaveResult.data);}};fetchData();},[]);const fetchAttendance=useCallback(async()=>{if(attendanceLoading)return;// Prevent multiple calls\nsetAttendanceLoading(true);try{// Fetch existing attendance data from backend\nconst attendanceResult=await staffAttendanceApi.getAttendance(date);if(attendanceResult.success){const attendanceMap={};attendanceResult.data.forEach(record=>{attendanceMap[record.staffId._id]=record.status;});// For staff without attendance records, check for approved leaves\nstaffList.forEach(staff=>{if(!attendanceMap[staff.id]){const leaveForDate=leaveRequests.find(leave=>leave.staffId&&leave.staffId._id===staff.id&&leave.status==='approved'&&new Date(leave.startDate)<=new Date(date)&&new Date(leave.endDate)>=new Date(date));if(leaveForDate){attendanceMap[staff.id]='LEAVE';}else{attendanceMap[staff.id]='PRESENT';// Default to PRESENT\n}}});setAttendance(attendanceMap);setOriginalAttendance(_objectSpread({},attendanceMap));}}finally{setAttendanceLoading(false);}},[staffList,date,leaveRequests]);useEffect(()=>{if(staffList.length>0){fetchAttendance();}},[date,staffList,fetchAttendance]);const fetchViewAttendance=useCallback(async()=>{if(viewAttendanceLoading)return;// Prevent multiple calls\nsetViewAttendanceLoading(true);try{const result=await staffAttendanceApi.getAttendance(viewDate);if(result.success){const attendanceMap={};result.data.forEach(record=>{attendanceMap[record.staffId._id]=record.status;});setViewAttendanceData(attendanceMap);}}finally{setViewAttendanceLoading(false);}},[viewDate]);useEffect(()=>{if(showSavedRecords&&staffList.length>0){fetchViewAttendance();}},[viewDate,showSavedRecords,staffList,fetchViewAttendance]);const fetchMonthlyAttendance=useCallback(async()=>{if(monthlyAttendanceLoading)return;// Prevent multiple calls\nsetMonthlyAttendanceLoading(true);setMonthlyError('');try{const result=await staffAttendanceApi.getMonthlyAttendance(month,year);if(result.success){setMonthlyData(result.data);}else{setMonthlyError(result.error||'Failed to fetch monthly attendance');}}catch(error){setMonthlyError('Network error occurred while fetching monthly attendance');console.error('Monthly attendance fetch error:',error);}finally{setMonthlyAttendanceLoading(false);}},[month,year]);useEffect(()=>{if(showMonthlyView&&staffList.length>0){fetchMonthlyAttendance();}},[month,year,showMonthlyView,staffList,fetchMonthlyAttendance]);const handleToggle=staffId=>{setAttendance(prev=>_objectSpread(_objectSpread({},prev),{},{[staffId]:prev[staffId]==='PRESENT'?'ABSENT':prev[staffId]==='ABSENT'?'LEAVE':'PRESENT'}));};const handleLeaveAction=async(leaveId,status)=>{setLeaveLoading(prev=>_objectSpread(_objectSpread({},prev),{},{[leaveId]:true}));const result=await staffAttendanceApi.updateLeaveStatus(leaveId,status);if(result.success){setLeaveRequests(prev=>prev.map(leave=>leave._id===leaveId?_objectSpread(_objectSpread({},leave),{},{status}):leave));setMessage(\"Leave \".concat(status,\" successfully\"));setTimeout(()=>setMessage(''),3000);// Refresh attendance to reflect leave changes\nfetchAttendance();}else{setMessage('Failed to update leave status');setTimeout(()=>setMessage(''),3000);}setLeaveLoading(prev=>_objectSpread(_objectSpread({},prev),{},{[leaveId]:false}));};const handleSave=async()=>{setLoading(true);// Prepare attendance data for backend\nconst attendanceData=Object.keys(attendance).map(staffId=>({staffId,status:attendance[staffId]}));const result=await staffAttendanceApi.markAttendance(date,attendanceData);if(result.success){setOriginalAttendance(_objectSpread({},attendance));setMessage('Attendance saved successfully');setTimeout(()=>setMessage(''),3000);}else{setMessage('Failed to save attendance');setTimeout(()=>setMessage(''),3000);}setLoading(false);};const hasChanges=()=>{return JSON.stringify(attendance)!==JSON.stringify(originalAttendance);};return/*#__PURE__*/_jsxs(\"div\",{className:\"menu-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Staff Attendance\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage staff attendance records.\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowSavedRecords(false);setShowMonthlyView(false);},style:{backgroundColor:!showSavedRecords&&!showMonthlyView?'#007bff':'#6c757d',color:'white',border:'none',padding:'8px 16px',borderRadius:'5px',marginRight:'10px',cursor:'pointer'},children:\"Mark Attendance\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowSavedRecords(true);setShowMonthlyView(false);},style:{backgroundColor:showSavedRecords&&!showMonthlyView?'#007bff':'#6c757d',color:'white',border:'none',padding:'8px 16px',borderRadius:'5px',marginRight:'10px',cursor:'pointer'},children:\"View Saved Attendance\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowSavedRecords(false);setShowMonthlyView(true);},style:{backgroundColor:showMonthlyView?'#007bff':'#6c757d',color:'white',border:'none',padding:'8px 16px',borderRadius:'5px',cursor:'pointer'},children:\"Monthly Attendance View\"})]}),showMonthlyView?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Monthly Attendance View\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Month:\"}),/*#__PURE__*/_jsx(\"select\",{value:month,onChange:e=>setMonth(parseInt(e.target.value)),style:{marginLeft:'10px',marginRight:'20px'},children:Array.from({length:12},(_,i)=>/*#__PURE__*/_jsx(\"option\",{value:i+1,children:new Date(0,i).toLocaleString('default',{month:'long'})},i+1))}),/*#__PURE__*/_jsx(\"label\",{children:\"Year:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:year,onChange:e=>setYear(parseInt(e.target.value)),style:{marginLeft:'10px',width:'80px'}})]}),monthlyAttendanceLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading monthly attendance data...\"}):monthlyError?/*#__PURE__*/_jsxs(\"div\",{style:{color:'red',padding:'10px',border:'1px solid red',borderRadius:'5px',backgroundColor:'#ffe6e6'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Error:\"}),\" \",monthlyError]}):monthlyData.length>0?/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px',position:'sticky',left:0,backgroundColor:'#f8f9fa'},children:\"Staff Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Designation\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Department\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Staff ID\"}),Array.from({length:new Date(year,month,0).getDate()},(_,i)=>/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px',minWidth:'50px'},children:i+1},i+1)),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Present\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Absent\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Leave\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:monthlyData.map(staffData=>{const attendance=staffData.attendance;const presentCount=Object.values(attendance).filter(status=>status==='PRESENT').length;const absentCount=Object.values(attendance).filter(status=>status==='ABSENT').length;const leaveCount=Object.values(attendance).filter(status=>status==='LEAVE').length;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px',position:'sticky',left:0,backgroundColor:'#f8f9fa',fontWeight:'bold'},children:staffData.staff.name}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:staffData.staff.designation}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:staffData.staff.department}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:staffData.staff.staffId}),Array.from({length:new Date(year,month,0).getDate()},(_,i)=>{const day=i+1;const status=attendance[day];return/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px',textAlign:'center'},children:/*#__PURE__*/_jsx(\"span\",{style:{backgroundColor:status==='PRESENT'?'green':status==='LEAVE'?'blue':status==='ABSENT'?'red':'#f0f0f0',color:status?'white':'black',padding:'5px',borderRadius:'3px',display:'inline-block',minWidth:'40px'},children:status?status.charAt(0):'-'})},day);}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px',textAlign:'center',fontWeight:'bold',color:'green'},children:presentCount}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px',textAlign:'center',fontWeight:'bold',color:'red'},children:absentCount}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px',textAlign:'center',fontWeight:'bold',color:'blue'},children:leaveCount}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px',textAlign:'center'},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedStaffReport(selectedStaffReport===staffData.staff._id?null:staffData.staff._id),style:{backgroundColor:'#007bff',color:'white',border:'none',padding:'5px 10px',borderRadius:'3px',cursor:'pointer'},children:selectedStaffReport===staffData.staff._id?'Hide Report':'View Report'})})]},staffData.staff._id);})})]})}):/*#__PURE__*/_jsxs(\"p\",{children:[\"No attendance records found for \",new Date(year,month-1).toLocaleString('default',{month:'long'}),\" \",year]}),selectedStaffReport&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'30px',padding:'20px',border:'1px solid #ddd',borderRadius:'5px',backgroundColor:'#f9f9f9'},children:(()=>{const staffData=monthlyData.find(data=>data.staff._id===selectedStaffReport);if(!staffData)return null;const attendance=staffData.attendance;const presentCount=Object.values(attendance).filter(status=>status==='PRESENT').length;const absentCount=Object.values(attendance).filter(status=>status==='ABSENT').length;const leaveCount=Object.values(attendance).filter(status=>status==='LEAVE').length;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Monthly Attendance Report for \",staffData.staff.name]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Staff ID:\"}),\" \",staffData.staff.staffId]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",staffData.staff.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Designation:\"}),\" \",staffData.staff.designation]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Department:\"}),\" \",staffData.staff.department]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Month:\"}),\" \",new Date(year,month-1).toLocaleString('default',{month:'long'}),\" \",year]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Summary:\"}),\" Present: \",presentCount,\", Absent: \",absentCount,\", Leave: \",leaveCount]})]}),/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Day\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Array.from({length:new Date(year,month,0).getDate()},(_,i)=>{const day=i+1;const status=attendance[day];return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px',textAlign:'center'},children:day}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px',textAlign:'center'},children:/*#__PURE__*/_jsx(\"span\",{style:{backgroundColor:status==='PRESENT'?'green':status==='LEAVE'?'blue':status==='ABSENT'?'red':'#f0f0f0',color:status?'white':'black',padding:'5px 10px',borderRadius:'3px',display:'inline-block'},children:status||'Not Marked'})})]},day);})})]})})]});})()})]}):!showSavedRecords?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:date,onChange:e=>setDate(e.target.value)})]}),/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Staff Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Designation\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Leave Status\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Attendance Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:staffList.map(staff=>{const leaveForDate=leaveRequests.find(leave=>leave.staffId&&leave.staffId._id===staff.id&&new Date(leave.startDate)<=new Date(date)&&new Date(leave.endDate)>=new Date(date));return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:staff.full_name}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:staff.designation_name}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:leaveForDate?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:leaveForDate.status==='approved'?'green':leaveForDate.status==='rejected'?'red':'orange'},children:leaveForDate.status}),leaveForDate.status==='pending'&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'5px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleLeaveAction(leaveForDate._id,'approved'),disabled:leaveLoading[leaveForDate._id],style:{backgroundColor:'green',color:'white',border:'none',padding:'2px 5px',marginRight:'5px',cursor:'pointer'},children:leaveLoading[leaveForDate._id]?'...':'Approve'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleLeaveAction(leaveForDate._id,'rejected'),disabled:leaveLoading[leaveForDate._id],style:{backgroundColor:'red',color:'white',border:'none',padding:'2px 5px',cursor:'pointer'},children:leaveLoading[leaveForDate._id]?'...':'Reject'})]})]}):'No leave'}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'5px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setAttendance(prev=>_objectSpread(_objectSpread({},prev),{},{[staff.id]:'PRESENT'})),style:{backgroundColor:attendance[staff.id]==='PRESENT'?'green':'#f0f0f0',color:attendance[staff.id]==='PRESENT'?'white':'black',border:'1px solid #ccc',padding:'5px 10px',cursor:'pointer',borderRadius:'3px'},children:\"PRESENT\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setAttendance(prev=>_objectSpread(_objectSpread({},prev),{},{[staff.id]:'ABSENT'})),style:{backgroundColor:attendance[staff.id]==='ABSENT'?'red':'#f0f0f0',color:attendance[staff.id]==='ABSENT'?'white':'black',border:'1px solid #ccc',padding:'5px 10px',cursor:'pointer',borderRadius:'3px'},children:\"ABSENT\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setAttendance(prev=>_objectSpread(_objectSpread({},prev),{},{[staff.id]:'LEAVE'})),style:{backgroundColor:attendance[staff.id]==='LEAVE'?'blue':'#f0f0f0',color:attendance[staff.id]==='LEAVE'?'white':'black',border:'1px solid #ccc',padding:'5px 10px',cursor:'pointer',borderRadius:'3px'},children:\"LEAVE\"})]})})]},staff.id);})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,disabled:!hasChanges()||loading,style:{marginTop:'20px',backgroundColor:hasChanges()?'#007bff':'#6c757d',color:'white',border:'none',padding:'10px 20px',borderRadius:'5px',cursor:hasChanges()?'pointer':'not-allowed',fontSize:'16px'},children:loading?'Saving...':'Save Attendance'}),message&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'10px',color:message.includes('success')?'green':'red'},children:message})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Saved Attendance Records\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Select Date to View:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:viewDate,onChange:e=>setViewDate(e.target.value),style:{marginLeft:'10px'}})]}),Object.keys(viewAttendanceData).length>0?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Staff Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Designation\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #ddd',padding:'8px'},children:\"Attendance Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:staffList.map(staff=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:staff.full_name}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:staff.designation_name}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #ddd',padding:'8px'},children:/*#__PURE__*/_jsx(\"span\",{style:{backgroundColor:viewAttendanceData[staff.id]==='PRESENT'?'green':viewAttendanceData[staff.id]==='LEAVE'?'blue':'red',color:'white',padding:'5px 10px',borderRadius:'3px'},children:viewAttendanceData[staff.id]||'Not Marked'})})]},staff.id))})]})}):/*#__PURE__*/_jsxs(\"p\",{children:[\"No attendance records found for \",viewDate]})]})]});};export default StaffAttendance;","map":{"version":3,"names":["React","useState","useEffect","useCallback","staffAttendanceApi","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","StaffAttendance","date","setDate","Date","toISOString","split","staffList","setStaffList","attendance","setAttendance","originalAttendance","setOriginalAttendance","viewDate","setViewDate","viewAttendanceData","setViewAttendanceData","leaveRequests","setLeaveRequests","message","setMessage","loading","setLoading","leaveLoading","setLeaveLoading","showSavedRecords","setShowSavedRecords","showMonthlyView","setShowMonthlyView","monthlyData","setMonthlyData","month","setMonth","getMonth","year","setYear","getFullYear","selectedStaffReport","setSelectedStaffReport","attendanceLoading","setAttendanceLoading","viewAttendanceLoading","setViewAttendanceLoading","monthlyAttendanceLoading","setMonthlyAttendanceLoading","monthlyError","setMonthlyError","fetchData","staffResult","getStaffList","success","formattedStaff","data","map","staff","id","_id","full_name","name","designation_name","designation","department","staffId","leaveResult","getLeaveRequests","fetchAttendance","attendanceResult","getAttendance","attendanceMap","forEach","record","status","leaveForDate","find","leave","startDate","endDate","_objectSpread","length","fetchViewAttendance","result","fetchMonthlyAttendance","getMonthlyAttendance","error","console","handleToggle","prev","handleLeaveAction","leaveId","updateLeaveStatus","concat","setTimeout","handleSave","attendanceData","Object","keys","markAttendance","hasChanges","JSON","stringify","className","children","style","marginBottom","onClick","backgroundColor","color","border","padding","borderRadius","marginRight","cursor","value","onChange","e","parseInt","target","marginLeft","Array","from","_","i","toLocaleString","type","width","overflowX","borderCollapse","marginTop","position","left","getDate","minWidth","staffData","presentCount","values","filter","absentCount","leaveCount","fontWeight","day","textAlign","display","charAt","disabled","gap","fontSize","includes"],"sources":["C:/Users/abhay/Downloads/COL-WEB-ADV-main (4)/clg-web-main1/Frontend/src/components/Admin Pannel/StaffAttendance.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { staffAttendanceApi } from '../../services/adminApi';\r\n\r\nconst StaffAttendance = () => {\r\n  const [date, setDate] = useState(new Date().toISOString().split('T')[0]);\r\n  const [staffList, setStaffList] = useState([]);\r\n\r\n  const [attendance, setAttendance] = useState({});\r\n  const [originalAttendance, setOriginalAttendance] = useState({});\r\n  const [viewDate, setViewDate] = useState(new Date().toISOString().split('T')[0]);\r\n  const [viewAttendanceData, setViewAttendanceData] = useState({});\r\n  const [leaveRequests, setLeaveRequests] = useState([]);\r\n  const [message, setMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [leaveLoading, setLeaveLoading] = useState({});\r\n  const [showSavedRecords, setShowSavedRecords] = useState(false);\r\n  const [showMonthlyView, setShowMonthlyView] = useState(false);\r\n  const [monthlyData, setMonthlyData] = useState([]);\r\n  const [month, setMonth] = useState(new Date().getMonth() + 1);\r\n  const [year, setYear] = useState(new Date().getFullYear());\r\n  const [selectedStaffReport, setSelectedStaffReport] = useState(null);\r\n  const [attendanceLoading, setAttendanceLoading] = useState(false);\r\n  const [viewAttendanceLoading, setViewAttendanceLoading] = useState(false);\r\n  const [monthlyAttendanceLoading, setMonthlyAttendanceLoading] = useState(false);\r\n  const [monthlyError, setMonthlyError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      // Fetch staff list from backend\r\n      const staffResult = await staffAttendanceApi.getStaffList();\r\n      if (staffResult.success) {\r\n        const formattedStaff = staffResult.data.map(staff => ({\r\n          id: staff._id,\r\n          full_name: staff.name,\r\n          designation_name: staff.designation,\r\n          department: staff.department,\r\n          staffId: staff.staffId\r\n        }));\r\n        setStaffList(formattedStaff);\r\n      }\r\n\r\n      // Fetch leave requests from backend\r\n      const leaveResult = await staffAttendanceApi.getLeaveRequests();\r\n      if (leaveResult.success) {\r\n        setLeaveRequests(leaveResult.data);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchAttendance = useCallback(async () => {\r\n    if (attendanceLoading) return; // Prevent multiple calls\r\n    setAttendanceLoading(true);\r\n    try {\r\n      // Fetch existing attendance data from backend\r\n      const attendanceResult = await staffAttendanceApi.getAttendance(date);\r\n      if (attendanceResult.success) {\r\n        const attendanceMap = {};\r\n        attendanceResult.data.forEach(record => {\r\n          attendanceMap[record.staffId._id] = record.status;\r\n        });\r\n\r\n        // For staff without attendance records, check for approved leaves\r\n        staffList.forEach(staff => {\r\n          if (!attendanceMap[staff.id]) {\r\n            const leaveForDate = leaveRequests.find(leave =>\r\n              leave.staffId && leave.staffId._id === staff.id &&\r\n              leave.status === 'approved' &&\r\n              new Date(leave.startDate) <= new Date(date) &&\r\n              new Date(leave.endDate) >= new Date(date)\r\n            );\r\n            if (leaveForDate) {\r\n              attendanceMap[staff.id] = 'LEAVE';\r\n            } else {\r\n              attendanceMap[staff.id] = 'PRESENT'; // Default to PRESENT\r\n            }\r\n          }\r\n        });\r\n\r\n        setAttendance(attendanceMap);\r\n        setOriginalAttendance({ ...attendanceMap });\r\n      }\r\n    } finally {\r\n      setAttendanceLoading(false);\r\n    }\r\n  }, [staffList, date, leaveRequests]);\r\n\r\n  useEffect(() => {\r\n    if (staffList.length > 0) {\r\n      fetchAttendance();\r\n    }\r\n  }, [date, staffList, fetchAttendance]);\r\n\r\n  const fetchViewAttendance = useCallback(async () => {\r\n    if (viewAttendanceLoading) return; // Prevent multiple calls\r\n    setViewAttendanceLoading(true);\r\n    try {\r\n      const result = await staffAttendanceApi.getAttendance(viewDate);\r\n      if (result.success) {\r\n        const attendanceMap = {};\r\n        result.data.forEach(record => {\r\n          attendanceMap[record.staffId._id] = record.status;\r\n        });\r\n        setViewAttendanceData(attendanceMap);\r\n      }\r\n    } finally {\r\n      setViewAttendanceLoading(false);\r\n    }\r\n  }, [viewDate]);\r\n\r\n  useEffect(() => {\r\n    if (showSavedRecords && staffList.length > 0) {\r\n      fetchViewAttendance();\r\n    }\r\n  }, [viewDate, showSavedRecords, staffList, fetchViewAttendance]);\r\n\r\n  const fetchMonthlyAttendance = useCallback(async () => {\r\n    if (monthlyAttendanceLoading) return; // Prevent multiple calls\r\n    setMonthlyAttendanceLoading(true);\r\n    setMonthlyError('');\r\n    try {\r\n      const result = await staffAttendanceApi.getMonthlyAttendance(month, year);\r\n      if (result.success) {\r\n        setMonthlyData(result.data);\r\n      } else {\r\n        setMonthlyError(result.error || 'Failed to fetch monthly attendance');\r\n      }\r\n    } catch (error) {\r\n      setMonthlyError('Network error occurred while fetching monthly attendance');\r\n      console.error('Monthly attendance fetch error:', error);\r\n    } finally {\r\n      setMonthlyAttendanceLoading(false);\r\n    }\r\n  }, [month, year]);\r\n\r\n  useEffect(() => {\r\n    if (showMonthlyView && staffList.length > 0) {\r\n      fetchMonthlyAttendance();\r\n    }\r\n  }, [month, year, showMonthlyView, staffList, fetchMonthlyAttendance]);\r\n\r\n  const handleToggle = (staffId) => {\r\n    setAttendance(prev => ({\r\n      ...prev,\r\n      [staffId]: prev[staffId] === 'PRESENT' ? 'ABSENT' : (prev[staffId] === 'ABSENT' ? 'LEAVE' : 'PRESENT')\r\n    }));\r\n  };\r\n\r\n  const handleLeaveAction = async (leaveId, status) => {\r\n    setLeaveLoading(prev => ({ ...prev, [leaveId]: true }));\r\n    const result = await staffAttendanceApi.updateLeaveStatus(leaveId, status);\r\n    if (result.success) {\r\n      setLeaveRequests(prev => prev.map(leave =>\r\n        leave._id === leaveId ? { ...leave, status } : leave\r\n      ));\r\n      setMessage(`Leave ${status} successfully`);\r\n      setTimeout(() => setMessage(''), 3000);\r\n      // Refresh attendance to reflect leave changes\r\n      fetchAttendance();\r\n    } else {\r\n      setMessage('Failed to update leave status');\r\n      setTimeout(() => setMessage(''), 3000);\r\n    }\r\n    setLeaveLoading(prev => ({ ...prev, [leaveId]: false }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setLoading(true);\r\n    // Prepare attendance data for backend\r\n    const attendanceData = Object.keys(attendance).map(staffId => ({\r\n      staffId,\r\n      status: attendance[staffId]\r\n    }));\r\n\r\n    const result = await staffAttendanceApi.markAttendance(date, attendanceData);\r\n    if (result.success) {\r\n      setOriginalAttendance({ ...attendance });\r\n      setMessage('Attendance saved successfully');\r\n      setTimeout(() => setMessage(''), 3000);\r\n    } else {\r\n      setMessage('Failed to save attendance');\r\n      setTimeout(() => setMessage(''), 3000);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const hasChanges = () => {\r\n    return JSON.stringify(attendance) !== JSON.stringify(originalAttendance);\r\n  };\r\n\r\n  return (\r\n    <div className=\"menu-content\">\r\n      <h1>Staff Attendance</h1>\r\n      <p>Manage staff attendance records.</p>\r\n\r\n      {/* Toggle between marking, viewing saved attendance, and monthly view */}\r\n      <div style={{ marginBottom: '20px' }}>\r\n        <button\r\n          onClick={() => {\r\n            setShowSavedRecords(false);\r\n            setShowMonthlyView(false);\r\n          }}\r\n          style={{\r\n            backgroundColor: !showSavedRecords && !showMonthlyView ? '#007bff' : '#6c757d',\r\n            color: 'white',\r\n            border: 'none',\r\n            padding: '8px 16px',\r\n            borderRadius: '5px',\r\n            marginRight: '10px',\r\n            cursor: 'pointer'\r\n          }}\r\n        >\r\n          Mark Attendance\r\n        </button>\r\n        <button\r\n          onClick={() => {\r\n            setShowSavedRecords(true);\r\n            setShowMonthlyView(false);\r\n          }}\r\n          style={{\r\n            backgroundColor: showSavedRecords && !showMonthlyView ? '#007bff' : '#6c757d',\r\n            color: 'white',\r\n            border: 'none',\r\n            padding: '8px 16px',\r\n            borderRadius: '5px',\r\n            marginRight: '10px',\r\n            cursor: 'pointer'\r\n          }}\r\n        >\r\n          View Saved Attendance\r\n        </button>\r\n        <button\r\n          onClick={() => {\r\n            setShowSavedRecords(false);\r\n            setShowMonthlyView(true);\r\n          }}\r\n          style={{\r\n            backgroundColor: showMonthlyView ? '#007bff' : '#6c757d',\r\n            color: 'white',\r\n            border: 'none',\r\n            padding: '8px 16px',\r\n            borderRadius: '5px',\r\n            cursor: 'pointer'\r\n          }}\r\n        >\r\n          Monthly Attendance View\r\n        </button>\r\n      </div>\r\n\r\n      {showMonthlyView ? (\r\n        <div>\r\n          <h3>Monthly Attendance View</h3>\r\n          <div style={{ marginBottom: '20px' }}>\r\n            <label>Month:</label>\r\n            <select\r\n              value={month}\r\n              onChange={(e) => setMonth(parseInt(e.target.value))}\r\n              style={{ marginLeft: '10px', marginRight: '20px' }}\r\n            >\r\n              {Array.from({ length: 12 }, (_, i) => (\r\n                <option key={i + 1} value={i + 1}>\r\n                  {new Date(0, i).toLocaleString('default', { month: 'long' })}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            <label>Year:</label>\r\n            <input\r\n              type=\"number\"\r\n              value={year}\r\n              onChange={(e) => setYear(parseInt(e.target.value))}\r\n              style={{ marginLeft: '10px', width: '80px' }}\r\n            />\r\n          </div>\r\n\r\n          {monthlyAttendanceLoading ? (\r\n            <p>Loading monthly attendance data...</p>\r\n          ) : monthlyError ? (\r\n            <div style={{ color: 'red', padding: '10px', border: '1px solid red', borderRadius: '5px', backgroundColor: '#ffe6e6' }}>\r\n              <strong>Error:</strong> {monthlyError}\r\n            </div>\r\n          ) : monthlyData.length > 0 ? (\r\n            <div style={{ overflowX: 'auto' }}>\r\n              <table style={{ width: '100%', borderCollapse: 'collapse', marginTop: '20px' }}>\r\n                <thead>\r\n                  <tr>\r\n                    <th style={{ border: '1px solid #ddd', padding: '8px', position: 'sticky', left: 0, backgroundColor: '#f8f9fa' }}>Staff Name</th>\r\n                    <th style={{ border: '1px solid #ddd', padding: '8px' }}>Designation</th>\r\n                    <th style={{ border: '1px solid #ddd', padding: '8px' }}>Department</th>\r\n                    <th style={{ border: '1px solid #ddd', padding: '8px' }}>Staff ID</th>\r\n                    {Array.from({ length: new Date(year, month, 0).getDate() }, (_, i) => (\r\n                      <th key={i + 1} style={{ border: '1px solid #ddd', padding: '8px', minWidth: '50px' }}>\r\n                        {i + 1}\r\n                      </th>\r\n                    ))}\r\n                    <th style={{ border: '1px solid #ddd', padding: '8px' }}>Present</th>\r\n                    <th style={{ border: '1px solid #ddd', padding: '8px' }}>Absent</th>\r\n                    <th style={{ border: '1px solid #ddd', padding: '8px' }}>Leave</th>\r\n                    <th style={{ border: '1px solid #ddd', padding: '8px' }}>Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {monthlyData.map(staffData => {\r\n                    const attendance = staffData.attendance;\r\n                    const presentCount = Object.values(attendance).filter(status => status === 'PRESENT').length;\r\n                    const absentCount = Object.values(attendance).filter(status => status === 'ABSENT').length;\r\n                    const leaveCount = Object.values(attendance).filter(status => status === 'LEAVE').length;\r\n                    return (\r\n                      <tr key={staffData.staff._id}>\r\n                        <td style={{ border: '1px solid #ddd', padding: '8px', position: 'sticky', left: 0, backgroundColor: '#f8f9fa', fontWeight: 'bold' }}>\r\n                          {staffData.staff.name}\r\n                        </td>\r\n                        <td style={{ border: '1px solid #ddd', padding: '8px' }}>{staffData.staff.designation}</td>\r\n                        <td style={{ border: '1px solid #ddd', padding: '8px' }}>{staffData.staff.department}</td>\r\n                        <td style={{ border: '1px solid #ddd', padding: '8px' }}>{staffData.staff.staffId}</td>\r\n                        {Array.from({ length: new Date(year, month, 0).getDate() }, (_, i) => {\r\n                          const day = i + 1;\r\n                          const status = attendance[day];\r\n                          return (\r\n                            <td key={day} style={{ border: '1px solid #ddd', padding: '8px', textAlign: 'center' }}>\r\n                              <span\r\n                                style={{\r\n                                  backgroundColor: status === 'PRESENT' ? 'green' : status === 'LEAVE' ? 'blue' : status === 'ABSENT' ? 'red' : '#f0f0f0',\r\n                                  color: status ? 'white' : 'black',\r\n                                  padding: '5px',\r\n                                  borderRadius: '3px',\r\n                                  display: 'inline-block',\r\n                                  minWidth: '40px'\r\n                                }}\r\n                              >\r\n                                {status ? status.charAt(0) : '-'}\r\n                              </span>\r\n                            </td>\r\n                          );\r\n                        })}\r\n                        <td style={{ border: '1px solid #ddd', padding: '8px', textAlign: 'center', fontWeight: 'bold', color: 'green' }}>{presentCount}</td>\r\n                        <td style={{ border: '1px solid #ddd', padding: '8px', textAlign: 'center', fontWeight: 'bold', color: 'red' }}>{absentCount}</td>\r\n                        <td style={{ border: '1px solid #ddd', padding: '8px', textAlign: 'center', fontWeight: 'bold', color: 'blue' }}>{leaveCount}</td>\r\n                        <td style={{ border: '1px solid #ddd', padding: '8px', textAlign: 'center' }}>\r\n                          <button\r\n                            onClick={() => setSelectedStaffReport(selectedStaffReport === staffData.staff._id ? null : staffData.staff._id)}\r\n                            style={{\r\n                              backgroundColor: '#007bff',\r\n                              color: 'white',\r\n                              border: 'none',\r\n                              padding: '5px 10px',\r\n                              borderRadius: '3px',\r\n                              cursor: 'pointer'\r\n                            }}\r\n                          >\r\n                            {selectedStaffReport === staffData.staff._id ? 'Hide Report' : 'View Report'}\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          ) : (\r\n            <p>No attendance records found for {new Date(year, month - 1).toLocaleString('default', { month: 'long' })} {year}</p>\r\n          )}\r\n\r\n          {/* Detailed Report Section */}\r\n          {selectedStaffReport && (\r\n            <div style={{ marginTop: '30px', padding: '20px', border: '1px solid #ddd', borderRadius: '5px', backgroundColor: '#f9f9f9' }}>\r\n              {(() => {\r\n                const staffData = monthlyData.find(data => data.staff._id === selectedStaffReport);\r\n                if (!staffData) return null;\r\n                const attendance = staffData.attendance;\r\n                const presentCount = Object.values(attendance).filter(status => status === 'PRESENT').length;\r\n                const absentCount = Object.values(attendance).filter(status => status === 'ABSENT').length;\r\n                const leaveCount = Object.values(attendance).filter(status => status === 'LEAVE').length;\r\n\r\n                return (\r\n                  <div>\r\n                    <h4>Monthly Attendance Report for {staffData.staff.name}</h4>\r\n                    <div style={{ marginBottom: '20px' }}>\r\n                      <p><strong>Staff ID:</strong> {staffData.staff.staffId}</p>\r\n                      <p><strong>Name:</strong> {staffData.staff.name}</p>\r\n                      <p><strong>Designation:</strong> {staffData.staff.designation}</p>\r\n                      <p><strong>Department:</strong> {staffData.staff.department}</p>\r\n                      <p><strong>Month:</strong> {new Date(year, month - 1).toLocaleString('default', { month: 'long' })} {year}</p>\r\n                      <p><strong>Summary:</strong> Present: {presentCount}, Absent: {absentCount}, Leave: {leaveCount}</p>\r\n                    </div>\r\n\r\n                    <div style={{ overflowX: 'auto' }}>\r\n                      <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                        <thead>\r\n                          <tr>\r\n                            <th style={{ border: '1px solid #ddd', padding: '8px' }}>Day</th>\r\n                            <th style={{ border: '1px solid #ddd', padding: '8px' }}>Status</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {Array.from({ length: new Date(year, month, 0).getDate() }, (_, i) => {\r\n                            const day = i + 1;\r\n                            const status = attendance[day];\r\n                            return (\r\n                              <tr key={day}>\r\n                                <td style={{ border: '1px solid #ddd', padding: '8px', textAlign: 'center' }}>{day}</td>\r\n                                <td style={{ border: '1px solid #ddd', padding: '8px', textAlign: 'center' }}>\r\n                                  <span\r\n                                    style={{\r\n                                      backgroundColor: status === 'PRESENT' ? 'green' : status === 'LEAVE' ? 'blue' : status === 'ABSENT' ? 'red' : '#f0f0f0',\r\n                                      color: status ? 'white' : 'black',\r\n                                      padding: '5px 10px',\r\n                                      borderRadius: '3px',\r\n                                      display: 'inline-block'\r\n                                    }}\r\n                                  >\r\n                                    {status || 'Not Marked'}\r\n                                  </span>\r\n                                </td>\r\n                              </tr>\r\n                            );\r\n                          })}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })()}\r\n            </div>\r\n          )}\r\n        </div>\r\n      ) : !showSavedRecords ? (\r\n        <>\r\n          <div>\r\n            <label>Date:</label>\r\n            <input\r\n              type=\"date\"\r\n              value={date}\r\n              onChange={(e) => setDate(e.target.value)}\r\n            />\r\n          </div>\r\n      <table style={{ width: '100%', borderCollapse: 'collapse', marginTop: '20px' }}>\r\n        <thead>\r\n          <tr>\r\n            <th style={{ border: '1px solid #ddd', padding: '8px' }}>Staff Name</th>\r\n            <th style={{ border: '1px solid #ddd', padding: '8px' }}>Designation</th>\r\n            <th style={{ border: '1px solid #ddd', padding: '8px' }}>Leave Status</th>\r\n            <th style={{ border: '1px solid #ddd', padding: '8px' }}>Attendance Status</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {staffList.map(staff => {\r\n            const leaveForDate = leaveRequests.find(leave =>\r\n              leave.staffId && leave.staffId._id === staff.id &&\r\n              new Date(leave.startDate) <= new Date(date) &&\r\n              new Date(leave.endDate) >= new Date(date)\r\n            );\r\n            return (\r\n              <tr key={staff.id}>\r\n                <td style={{ border: '1px solid #ddd', padding: '8px' }}>{staff.full_name}</td>\r\n                <td style={{ border: '1px solid #ddd', padding: '8px' }}>{staff.designation_name}</td>\r\n                <td style={{ border: '1px solid #ddd', padding: '8px' }}>\r\n                  {leaveForDate ? (\r\n                    <div>\r\n                      <span style={{ color: leaveForDate.status === 'approved' ? 'green' : leaveForDate.status === 'rejected' ? 'red' : 'orange' }}>\r\n                        {leaveForDate.status}\r\n                      </span>\r\n                      {leaveForDate.status === 'pending' && (\r\n                        <div style={{ marginTop: '5px' }}>\r\n                          <button\r\n                            onClick={() => handleLeaveAction(leaveForDate._id, 'approved')}\r\n                            disabled={leaveLoading[leaveForDate._id]}\r\n                            style={{ backgroundColor: 'green', color: 'white', border: 'none', padding: '2px 5px', marginRight: '5px', cursor: 'pointer' }}\r\n                          >\r\n                            {leaveLoading[leaveForDate._id] ? '...' : 'Approve'}\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleLeaveAction(leaveForDate._id, 'rejected')}\r\n                            disabled={leaveLoading[leaveForDate._id]}\r\n                            style={{ backgroundColor: 'red', color: 'white', border: 'none', padding: '2px 5px', cursor: 'pointer' }}\r\n                          >\r\n                            {leaveLoading[leaveForDate._id] ? '...' : 'Reject'}\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    'No leave'\r\n                  )}\r\n                </td>\r\n                <td style={{ border: '1px solid #ddd', padding: '8px' }}>\r\n                  <div style={{ display: 'flex', gap: '5px' }}>\r\n                    <button\r\n                      onClick={() => setAttendance(prev => ({ ...prev, [staff.id]: 'PRESENT' }))}\r\n                      style={{\r\n                        backgroundColor: attendance[staff.id] === 'PRESENT' ? 'green' : '#f0f0f0',\r\n                        color: attendance[staff.id] === 'PRESENT' ? 'white' : 'black',\r\n                        border: '1px solid #ccc',\r\n                        padding: '5px 10px',\r\n                        cursor: 'pointer',\r\n                        borderRadius: '3px'\r\n                      }}\r\n                    >\r\n                      PRESENT\r\n                    </button>\r\n                    <button\r\n                      onClick={() => setAttendance(prev => ({ ...prev, [staff.id]: 'ABSENT' }))}\r\n                      style={{\r\n                        backgroundColor: attendance[staff.id] === 'ABSENT' ? 'red' : '#f0f0f0',\r\n                        color: attendance[staff.id] === 'ABSENT' ? 'white' : 'black',\r\n                        border: '1px solid #ccc',\r\n                        padding: '5px 10px',\r\n                        cursor: 'pointer',\r\n                        borderRadius: '3px'\r\n                      }}\r\n                    >\r\n                      ABSENT\r\n                    </button>\r\n                    <button\r\n                      onClick={() => setAttendance(prev => ({ ...prev, [staff.id]: 'LEAVE' }))}\r\n                      style={{\r\n                        backgroundColor: attendance[staff.id] === 'LEAVE' ? 'blue' : '#f0f0f0',\r\n                        color: attendance[staff.id] === 'LEAVE' ? 'white' : 'black',\r\n                        border: '1px solid #ccc',\r\n                        padding: '5px 10px',\r\n                        cursor: 'pointer',\r\n                        borderRadius: '3px'\r\n                      }}\r\n                    >\r\n                      LEAVE\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n      <button\r\n        onClick={handleSave}\r\n        disabled={!hasChanges() || loading}\r\n        style={{\r\n          marginTop: '20px',\r\n          backgroundColor: hasChanges() ? '#007bff' : '#6c757d',\r\n          color: 'white',\r\n          border: 'none',\r\n          padding: '10px 20px',\r\n          borderRadius: '5px',\r\n          cursor: hasChanges() ? 'pointer' : 'not-allowed',\r\n          fontSize: '16px'\r\n        }}\r\n      >\r\n        {loading ? 'Saving...' : 'Save Attendance'}\r\n      </button>\r\n      {message && <div style={{ marginTop: '10px', color: message.includes('success') ? 'green' : 'red' }}>{message}</div>}\r\n        </>\r\n      ) : (\r\n        <div>\r\n          <h3>Saved Attendance Records</h3>\r\n          <div style={{ marginBottom: '20px' }}>\r\n            <label>Select Date to View:</label>\r\n            <input\r\n              type=\"date\"\r\n              value={viewDate}\r\n              onChange={(e) => setViewDate(e.target.value)}\r\n              style={{ marginLeft: '10px' }}\r\n            />\r\n          </div>\r\n\r\n          {Object.keys(viewAttendanceData).length > 0 ? (\r\n            <div>\r\n              <table style={{ width: '100%', borderCollapse: 'collapse', marginTop: '20px' }}>\r\n                <thead>\r\n                  <tr>\r\n                    <th style={{ border: '1px solid #ddd', padding: '8px' }}>Staff Name</th>\r\n                    <th style={{ border: '1px solid #ddd', padding: '8px' }}>Designation</th>\r\n                    <th style={{ border: '1px solid #ddd', padding: '8px' }}>Attendance Status</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {staffList.map(staff => (\r\n                    <tr key={staff.id}>\r\n                      <td style={{ border: '1px solid #ddd', padding: '8px' }}>{staff.full_name}</td>\r\n                      <td style={{ border: '1px solid #ddd', padding: '8px' }}>{staff.designation_name}</td>\r\n                      <td style={{ border: '1px solid #ddd', padding: '8px' }}>\r\n                        <span\r\n                          style={{\r\n                            backgroundColor: viewAttendanceData[staff.id] === 'PRESENT' ? 'green' : viewAttendanceData[staff.id] === 'LEAVE' ? 'blue' : 'red',\r\n                            color: 'white',\r\n                            padding: '5px 10px',\r\n                            borderRadius: '3px'\r\n                          }}\r\n                        >\r\n                          {viewAttendanceData[staff.id] || 'Not Marked'}\r\n                        </span>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          ) : (\r\n            <p>No attendance records found for {viewDate}</p>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StaffAttendance;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}