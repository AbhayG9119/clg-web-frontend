"use strict";(self.webpackChunkclg_web=self.webpackChunkclg_web||[]).push([[895],{2850:()=>{},5496:(e,a,t)=>{t.d(a,{$I:()=>n,AP:()=>o,EC:()=>c,WG:()=>u,auth:()=>r,wo:()=>d,z9:()=>i});const s=t(9722).A.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e});const r={login:async(e,a,t,r)=>{try{const n=await s.post("/auth/login",{email:e,password:a,captchaToken:t,role:r}),{token:d,user:o}=n.data;return localStorage.setItem("token",d),localStorage.setItem("role",o.role),localStorage.setItem("designation",o.designation||""),{success:!0,role:o.role}}catch(o){var n,d;return{success:!1,error:(null===(n=o.response)||void 0===n||null===(d=n.data)||void 0===d?void 0:d.message)||"Login failed"}}},getCurrentUser:async()=>{try{return{success:!0,data:(await s.get("/auth/me")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to get user info"}}},getMyPayments:async()=>{try{return{success:!0,data:(await s.get("/payments/my-payments")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch your payments"}}}},n={getDesignations:async()=>{try{return{success:!0,data:(await s.get("/staff/designations")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch designations"}}},addDesignation:async e=>{try{return{success:!0,data:(await s.post("/staff/designations",{name:e})).data}}catch(r){var a,t;return{success:!1,error:(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add designation"}}},registerStaff:async e=>{try{return{success:!0,data:(await s.post("/users/staff/register",e)).data}}catch(r){var a,t;return{success:!1,error:(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to register staff"}}},getStaff:async()=>{try{return{success:!0,data:(await s.get("/staff")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch staff"}}}},d={addEnquiry:async e=>{try{return{success:!0,data:(await s.post("/enquiries",e)).data}}catch(r){var a,t;return{success:!1,error:(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add enquiry"}}},getEnquiries:async()=>{try{return{success:!0,data:(await s.get("/enquiries")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch enquiries"}}},updateEnquiry:async(e,a)=>{try{return{success:!0,data:(await s.put("/enquiries/".concat(e),a)).data}}catch(n){var t,r;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to update enquiry"}}}},o={addWork:async e=>{try{return{success:!0,data:(await s.post("/works",e)).data}}catch(r){var a,t;return{success:!1,error:(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add work"}}},getWorks:async()=>{try{return{success:!0,data:(await s.get("/works")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch works"}}},addWorkReport:async e=>{try{return{success:!0,data:(await s.post("/work-reports",e)).data}}catch(r){var a,t;return{success:!1,error:(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to add work report"}}}},c={getStaffList:async()=>{try{return{success:!0,data:(await s.get("/erp/staff/list")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch staff list"}}},getAttendance:async e=>{try{return{success:!0,data:(await s.get("/erp/staff/attendance",{params:{date:e}})).data}}catch(r){var a,t;return{success:!1,error:(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch attendance"}}},markAttendance:async(e,a)=>{try{return{success:!0,data:(await s.post("/erp/staff/attendance",{date:e,attendanceData:a})).data}}catch(n){var t,r;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to mark attendance"}}},getAttendanceRecords:async(e,a)=>{try{return{success:!0,data:(await s.get("/erp/staff/attendance/records",{params:{startDate:e,endDate:a}})).data}}catch(n){var t,r;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to fetch attendance records"}}},getLeaveRequests:async()=>{try{return{success:!0,data:(await s.get("/erp/staff/leaves")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch leave requests"}}},updateLeaveStatus:async(e,a)=>{try{return{success:!0,data:(await s.put("/erp/staff/leave/".concat(e,"/status"),{status:a})).data}}catch(n){var t,r;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to update leave status"}}},getMonthlyAttendance:async(e,a)=>{try{return{success:!0,data:(await s.get("/erp/staff/attendance/monthly",{params:{month:e,year:a}})).data}}catch(n){var t,r;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to fetch monthly attendance"}}}},u={getMyPayments:async()=>{try{return{success:!0,data:(await s.get("/payments/my-payments")).data}}catch(t){var e,a;return{success:!1,error:(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch your payments"}}},searchStudent:async e=>{try{return{success:!0,data:(await s.get("/users",{params:{search:e,role:"student"}})).data}}catch(r){var a,t;return{success:!1,error:(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to search students"}}},getStudentFees:async e=>{try{return{success:!0,data:(await s.get("/payments/student/".concat(e))).data}}catch(r){var a,t;return{success:!1,error:(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch student fees"}}},collectFee:async e=>{try{return{success:!0,data:(await s.post("/payments/initiate",e)).data}}catch(r){var a,t;return{success:!1,error:(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to collect fee"}}},generateReceipt:async e=>{try{return{success:!0,data:(await s.post("/receipts/generate",{paymentId:e})).data}}catch(r){var a,t;return{success:!1,error:(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to generate receipt"}}},getPaymentDetails:async e=>{try{return{success:!0,data:(await s.get("/payments/".concat(e))).data}}catch(r){var a,t;return{success:!1,error:(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch payment details"}}},getStudentDetails:async(e,a)=>{try{return{success:!0,data:(await s.get("/users/".concat(e,"/").concat(a))).data}}catch(n){var t,r;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to fetch student details"}}},getStudentProfile:async(e,a)=>{try{return{success:!0,data:(await s.get("/student/profile/".concat(e,"/").concat(a))).data}}catch(n){var t,r;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to fetch student profile"}}},updateStudentProfile:async(e,a,t)=>{try{return{success:!0,data:(await s.put("/student/profile/".concat(e,"/").concat(a),t)).data}}catch(d){var r,n;return{success:!1,error:(null===(r=d.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Failed to update student profile"}}}},i={addExpense:async(e,a)=>{try{const t=new FormData;t.append("category",e.category),t.append("amount",e.amount),t.append("notes",e.notes||""),e.date&&t.append("date",e.date),a&&t.append("attachment",a);return{success:!0,data:(await s.post("/expenses",t,{headers:{"Content-Type":"multipart/form-data"}})).data}}catch(n){var t,r;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to add expense"}}},getExpenses:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return{success:!0,data:(await s.get("/expenses",{params:e})).data}}catch(r){var a,t;return{success:!1,error:(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch expenses"}}},getExpenseReport:async(e,a)=>{try{return{success:!0,data:(await s.get("/expenses/report",{params:{startDate:e,endDate:a}})).data}}catch(n){var t,r;return{success:!1,error:(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to generate expense report"}}},updateExpense:async(e,a,t)=>{try{const r=new FormData;a.category&&r.append("category",a.category),a.amount&&r.append("amount",a.amount),void 0!==a.notes&&r.append("notes",a.notes),a.date&&r.append("date",a.date),t&&r.append("attachment",t);return{success:!0,data:(await s.put("/expenses/".concat(e),r,{headers:{"Content-Type":"multipart/form-data"}})).data}}catch(d){var r,n;return{success:!1,error:(null===(r=d.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Failed to update expense"}}},deleteExpense:async e=>{try{return{success:!0,data:(await s.delete("/expenses/".concat(e))).data}}catch(r){var a,t;return{success:!1,error:(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to delete expense"}}}}},8895:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var s=t(5043),r=t(3216),n=t(5475),d=t(5496),o=t(722),c=(t(2850),t(579));const u=()=>{const[e,a]=(0,s.useState)(""),[t,u]=(0,s.useState)(""),[i,l]=(0,s.useState)(""),[p,v]=(0,s.useState)(!1),[g,y]=(0,s.useState)(null),h=(0,r.Zp)();return(0,c.jsxs)("div",{className:"admin-login-container",children:[(0,c.jsx)("h2",{children:"Admin Login"}),(0,c.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),l(""),v(!0);try{const a=await d.auth.login(e,t,g,"admin");a.success?h("/admin/dashboard"):l(a.error)}catch(n){var s,r;l((null===(s=n.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"Login failed"),y(null)}v(!1)},children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Email:"}),(0,c.jsx)("input",{type:"email",value:e,onChange:e=>a(e.target.value),required:!0})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Password:"}),(0,c.jsx)("input",{type:"password",value:t,onChange:e=>u(e.target.value),required:!0})]}),(0,c.jsx)("div",{className:"form-group",children:(0,c.jsx)(o.A,{sitekey:"6LcLptQrAAAAAHdtlrO3jVvYFwFUE_ixdSKWkzaP",onChange:e=>y(e)})}),(0,c.jsx)("button",{type:"submit",disabled:p||!g,children:p?"Logging in...":"Login"}),i&&(0,c.jsx)("p",{style:{color:"red"},children:i})]}),(0,c.jsxs)("p",{children:["Student? ",(0,c.jsx)(n.N_,{to:"/login",children:"Student Login"})]}),(0,c.jsxs)("p",{children:["Staff? ",(0,c.jsx)(n.N_,{to:"/staff/login",children:"Staff Login"})]}),(0,c.jsxs)("p",{children:["Don't have an account? ",(0,c.jsx)(n.N_,{to:"/signup",children:"Sign Up"})]})]})}}}]);
//# sourceMappingURL=895.e62bde4e.chunk.js.map